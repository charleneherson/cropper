!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r(require("axios")):"function"==typeof define&&define.amd?define(["axios"],r):(e=e||self).cashSDK=r(e.axios)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var r=function(){return(r=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};function n(e,r,n,t){return new(n||(n=Promise))(function(o,i){function a(e){try{c(t.next(e))}catch(e){i(e)}}function s(e){try{c(t.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(r){r(e.value)}).then(a,s)}c((t=t.apply(e,r||[])).next())})}function t(e,r){var n,t,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,t&&(o=2&i[0]?t.return:i[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,i[1])).done)return o;switch(t=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,t=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=r.call(e,a)}catch(e){i=[6,e],t=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var o={"-1":{errNo:"参数异常"},0:{errNo:0,errstr:"支付成功"},1:{errNo:1,errstr:"支付失败"},2:{errNo:2,errstr:"支付取消"},3:{errNo:3,errstr:"支付参数异常"},4:{errNo:4,errstr:"学币余额不足"},99:{errNo:99,errstr:"支付未知"}},i={PAYLIST:"PAYLIST",PAY:"PAY",PAYDOCOIN:"PAYDOCOIN",APPLEPAY:"APPLEPAY"};function a(e){var r=["getBrand","WCPayRequest"];return new Promise(function(n,t){e.timeStamp+="",WeixinJSBridge.invoke(r.join(""),e,function(e){"get_brand_wcpay_request:ok"===e.err_msg?(console.log("微信支付成功"),n(o[0])):"get_brand_wcpay_request:cancel"===e.err_msg?(console.log("微信支付取消"),n(o[2])):(console.log("🚗微信支付错误--》",e),o[1].errInfo={status:1,errstr:e.errMsg},o[1].errstr=e.errMsg||"支付失败",n(o[1]))})})}var s=navigator&&navigator.userAgent||"",c={isInApp:/homework|airclass|parent|scancode/i.test(s),isYikeApp:/airclass/i.test(s),isVipApp:/homework/i.test(s),isParentApp:/parent/i.test(s),isWechat:/micromessenger/i.test(s),isXcx:!(window||"object"!=typeof wx),isAndroid:/android|Adr/i.test(s),isIOS:/iPhone|iPad|iPod|iOS/i.test(s),isIpad:/iPad/gi.test(s),isAli:/AlipayClient|AliApp|DingTalk/i.test(s),isTencent:/MicroMessenger|QQ/i.test(s),isAliXcx:!(window||"object"!=typeof my)};function l(){return c.isAndroid?{os:"android",appType:"android"}:c.isIOS?{os:"ios",appType:"ios"}:{os:"pc",appType:"pc"}}var u=function(e){var r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(r),t="";return null!==n&&(t=n[2]),(n=r=null)===t||""===t||"undefined"===t?"":t};function d(e,r){return e(r={exports:{}},r.exports),r.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var f=d(function(e,r){function n(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},t=0;t<e.length;++t)void 0!==e[t]&&(n[t]=e[t]);return n}function t(e,r){m.apply(e,h(r)?r:[r])}function o(e,r,n,i,a,s,c,u,d,f,p,g,m){var y,v=e;if("function"==typeof c?v=c(r,v):v instanceof Date?v=f(v):"comma"===n&&h(v)&&(v=v.join(",")),null===v){if(i)return s&&!g?s(r,b.encoder,m,"key"):r;v=""}if("string"==typeof(y=v)||"number"==typeof y||"boolean"==typeof y||"symbol"==typeof y||"bigint"==typeof y||l.isBuffer(v))return s?[p(g?r:s(r,b.encoder,m,"key"))+"="+p(s(v,b.encoder,m,"value"))]:[p(r)+"="+p(String(v))];var w,_=[];if(void 0===v)return _;if(h(c))w=c;else{var P=Object.keys(v);w=u?P.sort(u):P}for(var x=0;x<w.length;++x){var C=w[x];a&&null===v[C]||(h(v)?t(_,o(v[C],"function"==typeof n?n(r,C):r,n,i,a,s,c,u,d,f,p,g,m)):t(_,o(v[C],r+(d?"."+C:"["+C+"]"),n,i,a,s,c,u,d,f,p,g,m)))}return _}function i(e,r,n,t){this.namespace=e,this.isLogInTest=t,this.api="/fengniao/prometheus/counter",this.domain="//www.zybang.com",r&&(-1===r.indexOf("http")&&-1===r.indexOf("https")&&(r="//"+r),this.domain=r),n&&(this.api=n),this.url=""+this.domain+this.api}var a,s,c,l,u,d,f,p,g,h,m,y,v,b;e.exports=(a=Object.prototype.hasOwnProperty,s=Array.isArray,c=function(){for(var e=[],r=0;r<256;++r)e.push("%"+((r<16?"0":"")+r.toString(16)).toUpperCase());return e}(),l={arrayToObject:n,assign:function(e,r){return Object.keys(r).reduce(function(e,n){return e[n]=r[n],e},e)},combine:function(e,r){return[].concat(e,r)},compact:function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],t=0;t<r.length;++t)for(var o=r[t],i=o.obj[o.prop],a=Object.keys(i),c=0;c<a.length;++c){var l=a[c],u=i[l];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(r.push({obj:i,prop:l}),n.push(u))}return function(e){for(;1<e.length;){var r=e.pop(),n=r.obj[r.prop];if(s(n)){for(var t=[],o=0;o<n.length;++o)void 0!==n[o]&&t.push(n[o]);r.obj[r.prop]=t}}}(r),e},decode:function(e,r,n){var t=e.replace(/\+/g," ");if("iso-8859-1"===n)return t.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(t)}catch(e){return t}},encode:function(e,r,n){if(0===e.length)return e;var t=e;if("symbol"==typeof e?t=Symbol.prototype.toString.call(e):"string"!=typeof e&&(t=String(e)),"iso-8859-1"===n)return escape(t).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",i=0;i<t.length;++i){var a=t.charCodeAt(i);45===a||46===a||95===a||126===a||48<=a&&a<=57||65<=a&&a<=90||97<=a&&a<=122?o+=t.charAt(i):a<128?o+=c[a]:a<2048?o+=c[192|a>>6]+c[128|63&a]:a<55296||57344<=a?o+=c[224|a>>12]+c[128|a>>6&63]+c[128|63&a]:(i+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(i)),o+=c[240|a>>18]+c[128|a>>12&63]+c[128|a>>6&63]+c[128|63&a])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(r,t,o){if(!t)return r;if("object"!=typeof t){if(s(r))r.push(t);else{if(!r||"object"!=typeof r)return[r,t];(o&&(o.plainObjects||o.allowPrototypes)||!a.call(Object.prototype,t))&&(r[t]=!0)}return r}if(!r||"object"!=typeof r)return[r].concat(t);var i=r;return s(r)&&!s(t)&&(i=n(r,o)),s(r)&&s(t)?(t.forEach(function(n,t){if(a.call(r,t)){var i=r[t];i&&"object"==typeof i&&n&&"object"==typeof n?r[t]=e(i,n,o):r.push(n)}else r[t]=n}),r):Object.keys(t).reduce(function(r,n){var i=t[n];return a.call(r,n)?r[n]=e(r[n],i,o):r[n]=i,r},i)}},u=String.prototype.replace,d=/%20/g,f={RFC1738:"RFC1738",RFC3986:"RFC3986"},p=l.assign({default:f.RFC3986,formatters:{RFC1738:function(e){return u.call(e,d,"+")},RFC3986:function(e){return String(e)}}},f),Object.prototype.hasOwnProperty,g={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},h=Array.isArray,m=Array.prototype.push,y=Date.prototype.toISOString,v=p.default,b={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:l.encode,encodeValuesOnly:!1,format:v,formatter:p.formatters[v],indices:!1,serializeDate:function(e){return y.call(e)},skipNulls:!1,strictNullHandling:!1},i.prototype.log=function(e,r,n){if(this.isLogInTest||-1===window.location.host.indexOf("suanshubang")){var i=function(e,r){var n,i=e,a=b;"function"==typeof a.filter?i=(0,a.filter)("",i):h(a.filter)&&(n=a.filter);var s=[];if("object"!=typeof i||null===i)return"";var c=g.indices;n=n||Object.keys(i),a.sort&&n.sort(a.sort);for(var l=0;l<n.length;++l){var u=n[l];a.skipNulls&&null===i[u]||t(s,o(i[u],u,c,a.strictNullHandling,a.skipNulls,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.formatter,a.encodeValuesOnly,a.charset))}var d=s.join(a.delimiter),f=!0===a.addQueryPrefix?"?":"";return a.charsetSentinel&&("iso-8859-1"===a.charset?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),0<d.length?f+d:""}({namespace:this.namespace,name:e,labels:r||{},help:n});console.log(i);var a=this.url+"?"+i;(new Image).src=a}},i)}),p={},g={},h={initAlarm:function(e){var r=e.alarmConfig,n=void 0===r?{}:r,t=e.appChannel,o=e.source,i=e.payEnv;g={appChannel:t,source:o,payEnv:i},p.isOpen=!0;var a=n.namespace||"cashierFe",s=n.domain||"https://www.zybang.com",c=n.api||"/fengniao/prometheus/counter",l=n.isOnline||!1;console.log("是否开启测试环境监听",l),p=new f(a,s,c,l)},uploadParamsError:function(e){console.log("上报信息uploadParamsError",r({},e,g)),p.log("paramsError",r({},e,g))},uploadAppError:function(e){console.log("uploadAppError",r({},e,g)),p.log("appError",r({},e,g))},uploadExpError:function(e){console.log("uploadExpError",r({},e,g)),p.log("expError",r({},e,g))}};function m(e){var r={errNo:0,errstr:"参数验证通过"};return e.mode&&e.source&&e.appChannel&&e.authServer||(r.errNo=-2,r.errstr="初始化sdk缺少mode、appChannel、source、authServer参数"),r}function y(e){var r={errNo:0,errstr:"参数验证通过"},n=m(e);return-2===n.errNo?n:(e.sign&&e.mode&&e.timestamp?2!==Number(e.mode)||e.orderId?1!==Number(e.mode)||e.requestNo||(r.errNo=-2,r.errstr="getPayList接口参数错误，mode为1时, requestNo为必须项"):(r.errNo=-2,r.errstr="getPayList接口参数错误，mode为2时, orderId为必须项"):(r.errNo=-2,r.errstr="getPayList接口参数错误, mode、sign、timestamp为必须项"),r)}function v(e){var r={errNo:0,errstr:"参数验证通过"},n=m(e);return-2===n.errNo?n:(e.orderId&&e.payChannel&&e.payRuleId?c.isWechat&&!(e.openId&&e.wxAppId||e.wxUser&&e.wxAppId)?(r.errNo=-2,r.errstr="pay接口参数错误，微信环境下openId/wxUser、wxAppId为必传参数"):9===e.payChannel&&e.price&&!/(^[1-9]\d*$)/.test(e.price)?(r.errNo=-2,r.errstr="学币支付的金额必须为正整数"):5!==e.payChannel&&12!==e.payChannel&&11!==e.payChannel&&7!==e.payChannel||e.returnUrl||(r.errNo=-2,r.errstr="pay接口参数错误，该支付方式returnUrl为必传参数"):(r.errNo=-2,r.errstr="pay接口参数错误，orderId、payRuleId、payChannel为必传参数"),r)}function b(e){var r={errNo:0,errstr:"参数验证通过"},n=m(e);return-2===n.errNo?n:(e.coinPay||(r.errNo=-2,r.errstr="支付协议为空，请检查在此之前是否调用pay方法"),r)}function w(e){var r={errNo:0,errstr:"参数验证通过"};return e.productId&&e.orderId||(r.errNo=-2,r.errstr="苹果支付productId、orderId必传"),r}function _(e,r){return{PAYLIST:y,PAY:v,PAYDOCOIN:b,APPLEPAY:w}[e](r)}function P(e){var r=window.location.href;window.location.search?window.location.search:window.location.hash,r=""+window.location.href,console.log("redirecturl--\x3e>",r),window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+e+"&redirect_uri="+encodeURIComponent(r)+"&response_type=code&scope=snsapi_base&state=wappay#wechat_redirect"}var x,C=d(function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var t,o,i,a=(t=e)&&"object"==typeof t&&"default"in t?t.default:t,s=(function(e,r){Object.defineProperty(r,"__esModule",{value:!0});for(var n=((u=a)&&"object"==typeof u&&"default"in u?u.default:u),t=Object.freeze({__proto__:null,get core_openWindow(){return M},get openWindow(){return M},get windowConfig(){return J},get openBrowser(){return Z},get core_goBack(){return K},get goBack(){return K},get share(){return z},get core_share(){return z},get core_login(){return G},get login(){return G},get checkLogin(){return $},get nativeLog(){return Q},get fetchImg(){return X},get dial(){return ee},get downloader(){return ne},get copyText(){return oe},get imgBrowser(){return ie},get core_audio(){return se},get audio(){return se},get core_showDialog(){return ce},get showDialog(){return ce},get netType(){return le},get core_request(){return de},get request(){return fe},get core_getCommonParameters(){return pe},get getCommonParameters(){return pe},get isAppInstalled(){return ge},get removeNativeLoading(){return he},get commonPay(){return me},get hybrid(){return ye},get pageTo(){return _e},get RouteSwitcher(){return ve},get core_openUrl(){return ke},get setStorage(){return Ae},get getStorage(){return Ie}}),o=function(){return(o=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},i={},s=["String","Number","Array","Function"],c=0,l=s.length;c<l;c++)!function(e){i["is"+e]=function(r){return Object.prototype.toString.call(r)==="[object "+e+"]"}}(s[c]);var u;function d(e){return function(r){return e&&e(r),Promise.resolve(r)}}function f(e){return function(r){return e&&e(r),Promise.reject(r)}}function p(e,r){return function(n){void 0===n&&(n={}),200==n.code?n.data&&!1===n.data.callResult?r&&r(n.data):n.data?e&&e(n.data):e&&e(n):200==n.errcode?(n.data&&e&&e(n.data),!n.data&&e&&e(n)):404==n.code||404==n.errcode?(n.data&&r&&r(n.data),!n.data&&r&&r(n)):e&&e(n)}}function g(e,r){return n=W,t=e,o=r,new Promise(function(e,r){function i(r){e(r)}function a(e){r(e)}o&&n(t,o,p(i,a)),o||n(t,p(i,a))});var n,t,o}var h,m,y,v,b,w,_=function(e){if(null===e)return null;var r=Object.assign({},e);return Object.keys(r).forEach(function(n){return r[n]="object"==typeof e[n]?_(e[n]):e[n]}),Array.isArray(e)&&e.length?(r.length=e.length)&&Array.from(r):Array.isArray(e)?Array.from(e):r},P=function(){return"xxxxxxxx_xxxx_4xxx_yxxx_xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=16*Math.random()|0;return("x"===e?r:3&r|8).toString(16)})},x=navigator.userAgent.toLowerCase(),C={android:-1<x.indexOf("android")||-1<x.indexOf("adr"),iPhone:-1<x.indexOf("iphone"),iPad:-1<x.indexOf("ipad")},k=(C.android||C.iPhone||C.iPad)&&0<x.indexOf("_vc"),A=k?"airclass":"a_irclass",I=k?"homework":"h_omework",S=-1<x.indexOf(A)?A:-1<x.indexOf(I)?I:"unknow";function N(e){return e.replace(/^\s+|\s+$/gm,"")}v=S+"_vc/",b=new RegExp(v+"[\\d.]+\\s*","ig"),w=x.match(b),Array.isArray(w)&&N(w[0].replace(v,"")),h=S+"_vcname/",m=new RegExp(h+"[\\d.]+\\s*","ig"),y=x.match(m),Array.isArray(y)&&N(y[0].replace(h,""));var j=k,B={isAndroid:function(){return C.android},isIPhone:function(){return C.iPhone},isIPad:function(){return C.iPad}},O=function(){var e={},r=window.navigator.userAgent.split(" ");if((r=r.filter(function(e){return 0<=e.indexOf("jsBridge_isNewJsBridge/")||0<=e.indexOf("jsBridge_vc/")||0<=e.indexOf("jsBridge_os_version/")})).forEach(function(r){var n=r.split("/");e[n[0]]=n[1]}),e.jsBridge_vc){var n=e.jsBridge_vc;n=+n.split(".").join(""),e.jsBridge_vcnum=n}return"1"===e.jsBridge_isNewJsBridge&&(e.isNewJsBridge=!0),e}(),T=window,L=/(localhost|127.0.0.1)/.test(location.origin),H=null;function E(){var e=L?"/hybridaction/":"iknowhybrid://",r=0;return function(n,t,o){var a,s=((a=document.createElement("iframe")).setAttribute("style","display:none;"),a.setAttribute("height","0px"),a.setAttribute("width","0px"),a.setAttribute("frameborder","0"),document.documentElement.appendChild(a),a);t&&"[object Function]"===Object.prototype.toString.call(t)&&(o=t,t={});var c,l=function(n,t,o){var a=e+n+"?",s=P();if(a+="data="+encodeURIComponent(JSON.stringify(t||{})),o){var c="__cb__"+n+"__"+s+"__"+r++;L&&(H=c),T[c]=function(){var e=arguments;(e=[].slice.call(e)).push(c),o&&o.apply(window,e),i.isFunction(o.remove)?c&&o.remove.apply(o,[c]):delete T[c]},a+="&__callback__="+c}return a}(n,t,o);L&&(s.onload=window[H]),H=null,s.setAttribute("src",l),(c=s).timer=setTimeout(function(){c.parentNode.removeChild(c),clearTimeout(c.timer)},3e3)}}T.hybrid_sdk_framekey=(new Date).getTime()+P(),r.iframeHybrid=j?E():"unknow"==S?function(){}:function(e,r,n){r&&"[object Function]"===Object.prototype.toString.call(r)&&(n=r,r={}),(r=r||{}).hybrid_sdk_framekey=T.hybrid_sdk_framekey,T.parent.h5PluginAction(e,r,n)},L&&(console.log("本地环境，createHybrid"),r.iframeHybrid=E());var R=window;function W(e,n,t){var o=O.jsBridge_os_version;o=o?o.substr(0,3):10,B.isAndroid()&&+o<4.2?r.iframeHybrid(e,n,t):(n&&"[object Function]"===Object.prototype.toString.call(n)&&(t=n,n={}),t&&(R[e]=t),R.__jsBridge.invoke(e,n,t))}R.__jsBridge={callbackPool:{},ack_no:1},R.__jsBridge.invoke=function(e,n,t){var o="cbk_"+(new Date).getTime(),i={action:e};n&&(i.param=n),t&&(o="cbk_"+R.__jsBridge.ack_no++,i.callbackKey=o,R.__jsBridge.callbackPool[o]=t,"core_windowConfig"==e&&(R.__jsBridge.callbackPool[e]=t));var a=R.__jsBridge.param(i);R.ZYBJSBridge?R.ZYBJSBridge.postMessage(a):R.webkit&&R.webkit.messageHandlers?R.webkit.messageHandlers.ZYBJSBridge.postMessage(a):r.iframeHybrid(e,n,t)},R.__jsBridge.callback=function(e){var r=e.callbackKey,n=R.__jsBridge.callbackPool[r];"function"==typeof n?(delete e.callbackKey,n(e),n.remove||delete R.__jsBridge.callbackPool.callbackKey):console.error("没有找到callbackKey")},R.__jsBridge.param=function(e){return JSON.stringify(e)||""};var U=window,D=U.getOpenWindowClassName&&U.getOpenWindowClassName()||null,F={pageUrl:"",title:"",swapBack:0,hideStatusBar:0,hideNavBar:0,screenDirection:0,navBarBgColor:"",staBarStyle:0,showShareBtn:0,allLight:0},q=["","WebViewController","com.baidu.homework.activity.web.ZybWebActivity","ZYBWKWebViewController","com.baidu.homework.activity.live.web.LiveCacheHybridActivity"];function M(e){if(e.businessData){var r=e.businessData.classType;r.ios&&(e.businessData.className_ios=q[r.ios]),r.android&&(e.businessData.className_android=q[r.android]),delete e.businessData.classType,e.businessData=o(o({},D),e.businessData)}else e.businessData=D;return g("core_openWindow",o(o({},F),e))}var V={pageUrl:"",title:"",swapBack:0,hideStatusBar:0,hideNavBar:0,screenDirection:0,navBarBgColor:"",staBarStyle:0,allLight:0,showShareBtn:0,shareBtnBgImg:"",shareData:{},shareCallBack:function(){},backShowDialog:0,dialogData:{},dialogCallback:function(){g("core_exit",{backWindow:1})}};function J(e){var r=o({},e);return new Promise(function(e,n){function t(r){e(r)}function o(e){n(e)}W("core_windowConfig",r,function(e){var n=p(t,o),i=r.shareCallBack||V.shareCallBack,a=r.dialogCallback||V.dialogCallback;e.data&&0<e.data.result+1?i(e.data):e.data&&e.data.res?a(e.data):n(e.data)})})}function Z(e){W("core_openBrowser",e)}function K(e){return g("core_exit",o({backWindow:0},e))}var Y={style:0,title:"",content:"",contentWeibo:"",url:"",imgBase64:"",imgUrl:"",origin:"",fileExtension:"",shotScreen:0,channelArray:[0,1,2,3,4],directChannel:-1};function z(e,r){var n=o(o({},Y),e),t=d(r),i=f(r);return g("core_share",n).then(t,i)}function G(e,r){var n=d(r),t=f(r);return g("core_login",e).then(n,t)}function $(e){var r=d(e),n=f(e);return g("core_isLogin").then(r,n)}function Q(e){return g("core_nlog",o({},e))}function X(e,r){var n=o({},e),t=d(r),i=f(r);return g("core_fetchImg",n).then(t,i)}function ee(e){return g("core_dial",e)}var re={url:"",type:0};function ne(e,r){var n=o(o({},re),e),t=d(r),i=f(r);return g("core_downloader",n).then(t,i)}var te={content:"",hint:""};function oe(e){return g("core_copyToClipboard",o(o({},te),e))}function ie(e){return g("core_showImgBrowser",o({},e))}var ae={playStatus:1,url:"",loop:0,interrupt:1};function se(e){var r=e.data,n=e.success,t=e.error,i=e.complete,a=e.notFound,s=e.interrupt,c=o(o({},ae),r);c.srcName&&(c.url=c.srcName,delete c.srcName),W("core_audioDisplay",c,function(e){switch(+e.data.code){case 200:n&&n(e.data);break;case 202:i&&i(e.data);break;case 403:s&&s(e.data);break;case 500:t&&t(e.data);break;default:t(e.data)}404==e.code&&a&&a(e.data)})}function ce(e,r){var n=o({title:""},e),t=d(r),i=f(r);return g("core_showDialog",n).then(t,i)}function le(e){var r=d(e),n=f(e);return g("core_netStatus").then(r,n)}var ue={type:"post",url:"",params:{}};function de(e){return g("core_httpRequest",o(o({},ue),e))}function fe(e,r){var t,i=d(r),a=f(r);return j?de(e).then(i,a):n({method:(t=e).type,url:t.url,headers:t.headers,data:t.params}).then(function(e){var r=o({env:"web",errorTips:""},e);return i&&i(r),r})}function pe(e){var r=d(e),n=f(e);return g("core_commonData").then(r,n)}function ge(e,r){var n={url:e.url},t=d(r),o=f(r);return g("core_isAppInstalled",n).then(t,o)}function he(){return g("core_removeLoading")}function me(e,r){var n=d(r),t=f(r);return 210<=O.jsBridge_vcnum?g("core_FIRE",e).then(n,t):Promise.reject({code:404,errcode:404}).then(n,t)}function ye(e,n,t){0===e.indexOf("core_")?W(e,n,t):r.iframeHybrid(e,n,t)}j&&O.isNewJsBridge&&setTimeout(function(){he()},3e3);var ve=(we.prototype.pollingRoutesConfig=function(e){var r=this;e?(this.storeRoutesMap(e),setInterval(function(){r.storeRoutesMap(e)},6e4)):console.log("configUrl 为空，不能请求路由表")},we.prototype.pageTo=function(e,r){if(console.log("pageTo this"),console.log(this),this.isParsingUrlByOwn){var n=this.parsingRoute(e),t=_(e);delete t.module,delete t.page,delete t.params,delete t.prefix;var i=o({pageUrl:n},t);console.log("sdk.core_openWindow({pageUrl:parsedUrl, ...otherParams})"),console.log(i);var a=d(r),s=f(r);return this.sdk.core_openWindow(i).then(a,s)}e.pageKey="zyb://"+e.module+"/page/"+e.page+e.params,delete e.module,delete e.page,delete e.params,console.log("sdk.core_openUrl(to, callback)"),console.log(e),a=d(r);var c=f(r);return this.sdk.core_openUrl(e).then(a,c)},we.prototype.parsingRoute=function(e){var r=e.module,n=e.page,t=e.params;return""+(e.prefix||"/static/hy/")+r+"/"+n+".html"+t},we.prototype.storeRoutesMap=function(e){var r=this;n.get(e).then(function(e){var n=e.data,t=void 0===n?{}:n,o=e.status;if((o+"").startsWith("4")||(o+"").startsWith("5"))throw new Error("get sparta route failed with status: "+o+", data: "+JSON.stringify(t)+" ");r.routeMap=t,r.isRouteConfigReturned=!0,console.log("获取路由表成功时间差"+((new Date).getTime()-r.initTimestamp))})},we.prototype.getStoredRoutes=function(){return this.routeMap},we.prototype.getRouteConfUrl=function(){var e,r=this.platform,n=(new Date).getTime(),t=Math.floor(n/1e5),o=this.detectEnv();if(console.log("envType"),console.log(o),"online"===o.type)e="https://xxx.bsc.com/route/online/";else if("tips"===o.type)e=" https://xxx.bsc.com/route/tips/";else{if("docker"!==o.type)return null;e="https://xxx.bcs.com/route/"+o.name+"/"}return""+e+r+".json?t="+t},we.prototype.detectEnv=function(){var e=window.document.location.host,r=/(.*)-docker.*/g.exec(e);return"www.zybang.com"===e?null!==function(e){for(var r=e+"=",n=document.cookie.split(";"),t=0;t<n.length;t++){var o=n[t].trim();if(0==o.indexOf(r))return o.substring(r.length,o.length)}return null}("__tips__")||null!==function(e){var r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(r);return null!=n?decodeURIComponent(n[2]):null}("__tips__")?{type:"tips"}:{type:"online"}:r?{type:"docker",name:r[1]}:{type:"unknow"}},we.instance=null,we),be=new ve;function we(e){if(this.isCommonActionReturned=!1,this.isRouteConfigReturned=!1,this.routeMap=null,this.initTimestamp=(new Date).getTime(),console.log("初始化RouteSwitcher时间"+this.initTimestamp),this.sdk=e||t,we.instance)return we.instance;console.log("switchConfig",O),this.isParsingUrlByOwn=O.jsBridge_vcnum<210}var _e=(window.__router__=be).pageTo.bind(be);window.__router__.pageTo.bind(window.__router__);var Pe=["","WebViewController","com.baidu.homework.activity.web.ZybWebActivity","ZYBWKWebViewController","com.baidu.homework.activity.live.web.LiveCacheHybridActivity"],xe=window,Ce=xe.getOpenWindowClassName&&xe.getOpenWindowClassName()||null;function ke(e){if(e.businessData){var r=e.businessData.classType;r.ios&&(e.businessData.className_ios=Pe[r.ios]),r.android&&(e.businessData.className_android=Pe[r.android]),delete e.businessData.classType,e.businessData=o(o({},Ce),e.businessData)}else e.businessData=Ce;return g("core_openUrl",o({},e))}function Ae(e,r){var n=d(r),t=f(r);return g("core_storage",e).then(n,t)}function Ie(e,r){var n=d(r),t=f(r);return g("core_getStorage",e).then(n,t)}r.audio=se,r.canUseCommon=function(e){var r=1==+O.jsBridge_isNewJsBridge&&O.jsBridge_vcnum>=e;if(B.isAndroid()){var n=O.jsBridge_os_version;(n=n?+n.substr(0,3):10)<4.2&&(r=!1)}return r},r.checkLogin=$,r.commonPay=me,r.copyText=oe,r.core_audio=se,r.core_getCommonParameters=pe,r.core_goBack=K,r.core_login=G,r.core_openWindow=M,r.core_request=de,r.core_share=z,r.core_showDialog=ce,r.dial=ee,r.downloader=ne,r.fetchImg=X,r.getCommonParameters=pe,r.getStorage=Ie,r.goBack=K,r.hybrid=ye,r.imgBrowser=ie,r.isAppInstalled=ge,r.jsBridgeInfo=O,r.login=G,r.nativeLog=Q,r.netType=le,r.openBrowser=Z,r.openWindow=M,r.pageTo=_e,r.postMessageHybrid=W,r.removeNativeLoading=he,r.request=fe,r.setStorage=Ae,r.share=z,r.showDialog=ce,r.transformCacheUrl=function(e){return"1"===function(){for(var e=window.location.search.substring(1).split("&"),r=0;r<e.length;r++){var n=e[r].split("=");if("zybhost"===n[0])return n[1]}return!1}()?function(e){if("string"!=typeof e)throw new Error("url must be string");return"zybhost://"+e.match(/^(.*\/\/)?(.*)$/)[2]}(e):e},r.windowConfig=J}(i={exports:{}},i.exports),i.exports),c=(o=s)&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,l=s.iframeHybrid,u=s.audio,d=s.canUseCommon,f=s.checkLogin,p=s.commonPay,g=s.copyText,h=s.core_audio,m=s.core_getCommonParameters,y=s.core_goBack,v=s.core_login,b=s.core_openWindow,w=s.core_request,_=s.core_share,P=s.core_showDialog,x=s.dial,C=s.downloader,k=s.fetchImg,A=s.getCommonParameters,I=s.getStorage,S=s.goBack,N=s.hybrid,j=s.imgBrowser,B=s.isAppInstalled,O=s.jsBridgeInfo,T=s.login,L=s.nativeLog,H=s.netType,E=s.openBrowser,R=s.openWindow,W=s.pageTo,U=s.postMessageHybrid,D=s.removeNativeLoading,F=s.request,q=s.setStorage,M=s.share,V=s.showDialog,J=s.transformCacheUrl,Z=s.windowConfig,K=Object.freeze({__proto__:null,default:c,__moduleExports:s,iframeHybrid:l,audio:u,canUseCommon:d,checkLogin:f,commonPay:p,copyText:g,core_audio:h,core_getCommonParameters:m,core_goBack:y,core_login:v,core_openWindow:b,core_request:w,core_share:_,core_showDialog:P,dial:x,downloader:C,fetchImg:k,getCommonParameters:A,getStorage:I,goBack:S,hybrid:N,imgBrowser:j,isAppInstalled:B,jsBridgeInfo:O,login:T,nativeLog:L,netType:H,openBrowser:E,openWindow:R,pageTo:W,postMessageHybrid:U,removeNativeLoading:D,request:F,setStorage:q,share:M,showDialog:V,transformCacheUrl:J,windowConfig:Z});function Y(){return"xxxxxxxx_xxxx_4xxx_yxxx_xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=16*Math.random()|0;return("x"===e?r:3&r|8).toString(16)})}function z(e){return function(r){return e&&e(r),Promise.resolve(r)}}function G(e){return function(r){return e&&e(r),Promise.reject(r)}}function $(e,r){return function(n){void 0===n&&(n={}),200==n.code?n.data&&!1===n.data.callResult?r&&r(n.data):n.data?e&&e(n.data):e&&e(n):200==n.errcode?(n.data&&e&&e(n.data),!n.data&&e&&e(n)):404==n.code||404==n.errcode?(n.data&&r&&r(n.data),!n.data&&r&&r(n)):e&&e(n)}}function Q(e,r){return function(e,r,n){return new Promise(function(t,o){function i(e){t(e)}function a(e){o(e)}n&&e(r,n,$(i,a)),n||e(r,$(i,a))})}(l,e,r)}window.location.host.indexOf("-docker.suanshubang.com"),window.localStorage.getItem("actionLogShow");var X=function(e){return e.replace(/^\s+|\s+$/gm,"")},ee=navigator.userAgent.toLowerCase(),re="android",ne={android:-1<ee.indexOf(re)||-1<ee.indexOf("adr"),iPhone:-1<ee.indexOf("iphone"),iPad:-1<ee.indexOf("ipad")},te=ne.android||ne.iPhone||ne.iPad,oe=ne.iPhone?"iphone":ne.iPad?"ipad":ne.android?re:"windows",ie=te?"airclass":"a_irclass",ae=te?"homework":"h_omework",se="unknow",ce=-1<ee.indexOf(ie)?ie:-1<ee.indexOf(ae)?ae:se;function le(e){return e.replace(/^\s+|\s+$/gm,"")}var ue,de,fe,pe,ge,he,me=(pe=ce+"_vc/",ge=new RegExp(pe+"[\\d.]+\\s*","ig"),he=ee.match(ge),Array.isArray(he)?le(he[0].replace(pe,"")):""),ye=(ue=ce+"_vcname/",de=new RegExp(ue+"[\\d.]+\\s*","ig"),fe=ee.match(de),Array.isArray(fe)?le(fe[0].replace(ue,"")):""),ve=te;function be(){return te}function we(){return oe}function _e(){return ce.replace("_","")}function Pe(){return me}function xe(){return ye}function Ce(){return ce.replace("_","")!==se}for(var ke={isAndroid:function(){return ne.android},isIPhone:function(){return ne.iPhone},isIPad:function(){return ne.iPad}},Ae=function(){var e={},r=window.navigator.userAgent.split(" ");if((r=r.filter(function(e){return 0<=e.indexOf("jsBridge_isNewJsBridge/")||0<=e.indexOf("jsBridge_vc/")||0<=e.indexOf("jsBridge_os_version/")})).forEach(function(r){var n=r.split("/");e[n[0]]=n[1]}),e.jsBridge_vc){var n=e.jsBridge_vc;n=+n.split(".").join(""),e.jsBridge_vcnum=n}return e}(),Ie={},Se=["String","Number","Array","Function"],Ne=0,je=Se.length;Ne<je;Ne++)!function(e){Ie["is"+e]=function(r){return Object.prototype.toString.call(r)==="[object "+e+"]"}}(Se[Ne]);var Be=404,Oe=window,Te=/(localhost|127.0.0.1)/.test(location.origin),Le=null;function He(){var e=Te?"/hybridaction/":"iknowhybrid://",r=0;return function(n,t,o){var i,a=((i=document.createElement("iframe")).setAttribute("style","display:none;"),i.setAttribute("height","0px"),i.setAttribute("width","0px"),i.setAttribute("frameborder","0"),document.documentElement.appendChild(i),i);t&&"[object Function]"===Object.prototype.toString.call(t)&&(o=t,t={});var s,c=function(n,t,o){var i=e+n+"?",a=Y();if(i+="data="+encodeURIComponent(JSON.stringify(t||{})),o){var s="__cb__"+n+"__"+a+"__"+r++;Te&&(Le=s),Oe[s]=function(){var e=arguments;(e=[].slice.call(e)).push(s),o&&o.apply(window,e),Ie.isFunction(o.remove)?s&&o.remove.apply(o,[s]):delete Oe[s]},i+="&__callback__="+s}return i}(n,t,o);Te&&(a.onload=window[Le]),Le=null,a.setAttribute("src",c),(s=a).timer=setTimeout(function(){s.parentNode.removeChild(s),clearTimeout(s.timer)},3e3)}}function Ee(e,r){var n=null;return(Ie.isFunction(e)||Ie.isFunction(r))&&(n=function(n){n&&n.code===Be?Ie.isFunction(r)&&r.call(window,n):Ie.isFunction(e)&&e.call(window,n)}),n}function Re(e){void 0===e&&(e={});var r=e.success,n=e.notFound,t=z(r),o=G(n);return Q("scoreUpdate").then(t,o)}function We(e){n.iframeHybrid("nlog",e)}function Ue(e){n.iframeHybrid("liveNlog",e)}function De(e){n.iframeHybrid("requestDataFromNative",e)}function Fe(e,r){if("[object Function]"!==Object.prototype.toString.call(r))return console.error("callback is not function"),!1;n.iframeHybrid("TimeSynchronization",e,r)}function qe(){n.iframeHybrid("webExit")}function Me(e){n.iframeHybrid?n.iframeHybrid("TKEvaluatingRecordStart",e):console.error("hybrid is undefined")}function Ve(e){n.iframeHybrid?n.iframeHybrid("TKEvaluatingRecordEnd",e):console.error("hybrid is undefined")}function Je(e,r){n.iframeHybrid?n.iframeHybrid("ZybPlayAudio",e,function e(n,t){switch(console.log(n),parseInt(n.code)||0){case 1:case 2:r.call(this,n),e.remove=function(){};break;case 3:case 4:r.call(this,n),e.remove=function(e){e&&window[e]&&delete window[e]}}}):console.error("hybrid is undefined")}Oe.hybrid_sdk_framekey=(new Date).getTime()+Y(),n.iframeHybrid=ve?He():ce===se?function(){}:function(e,r,n){r&&"[object Function]"===Object.prototype.toString.call(r)&&(n=r,r={}),(r=r||{}).hybrid_sdk_framekey=Oe.hybrid_sdk_framekey,Oe.parent.h5PluginAction(e,r,n)},Te&&(console.log("本地环境，createHybrid"),n.iframeHybrid=He());var Ze=[];function Ke(e){if(void 0===e&&(e={}),n.iframeHybrid){var r=e.data,t=Ee(e.success,e.notFound);n.iframeHybrid("webExerciseFinish",r,t)}else console.error("hybrid is undefined")}function Ye(e,r){return n.iframeHybrid("liveCourseAnswerResult",e,r)}function ze(e){return n.iframeHybrid("submitTestSuccess",e)}function Ge(e){e&&e.saveKey?e.saveType?"1"===e.saveType||"2"===e.saveType?n.iframeHybrid("storage",e):console.error("saveType must be 1 or 2"):console.error("saveType is required"):console.error("saveKey is required")}function $e(e,r){e&&e.saveKey?e.saveType?"1"===e.saveType||"2"===e.saveType?n.iframeHybrid?n.iframeHybrid("getStorageValue",e,r):console.error("hybrid is undefined"):console.error("saveType must be 1 or 2"):console.error("saveType is required"):console.error("saveKey is required")}function Qe(e){if(!e.text)return console.error("toast text is undefined"),!1;n.iframeHybrid("toast",e)}function Xe(e){var r=e.url;r?be()?window.location.href=r:function(e){void 0!==window.ZCefClient?e&&e.url?window.ZCefClient.invokeMethod("GoClassRoom",e.url):console.error("url is undefined"):console.error("there no define zcef")}({url:r}):console.error("url is not defined")}function er(e){var r=e.url;r?be()?window.location.href=r:function(e){void 0!==window.ZCefClient?e&&e.url?window.ZCefClient.invokeMethod("GoVideoShow",e.url):console.error("url is undefined"):console.error("there no define zcef")}({url:r}):console.error("url is not defined")}function rr(e){n.iframeHybrid("logReport",e)}function nr(e){e&&e.content||console.error("content is undefined"),n.iframeHybrid("logcat",e)}function tr(e){n.iframeHybrid("webCacheForbidBack",{forbidBack:!0},e)}function or(e){n.iframeHybrid("webCacheForbidBack",{forbidBack:!1},e)}function ir(e){void 0===e&&(e=!1);var r=ve?n.iframeHybrid:ce===se?"":window.parent.h5PluginAction;r?r("webCacheFinishPage",{finishPage:e?1:0}):console.error("hybrid is undefined")}function ar(e){if(Ie.isFunction(e))return console.error("callback is not a function"),!1;function r(r){return e&&e(r),r}var n=r;return Q("getLocation").then(r,n)}function sr(e){return Ie.isFunction(e)?Q("getuserinfo").then(function(r){return e&&e(r),Promise.resolve(r)},function(r){return e&&e(r),Promise.reject(r)}):(console.error("getuserinfo callback is not a function"),!1)}function cr(e){if(void 0===e&&(e={}),!e)return console.error("parameter is undefined!"),!1;n.iframeHybrid("afterSaveAddressAction",e)}function lr(e,r){if(void 0===e&&(e={}),!e)return console.error("calendarWeb data is required"),!1;n.iframeHybrid("AddToCalendarWebAction",e,r)}function ur(){n.iframeHybrid("openCamera")}function dr(e){return e&&e.url?e.fr?void n.iframeHybrid("openRobotChat",e):(console.error("chat fr is undefined"),!1):(console.error("chat url is undefined"),!1)}function fr(e,r){e.atNickname?Ie.isFunction(r)?n.iframeHybrid("commentReply",e,r):console.error("callback is not function"):console.error("atNickname is undefined")}function pr(e){var r=e.url,t=e.msgId;r&&t?n.iframeHybrid("teacherMessageDetail",e):console.error("url or msgId is undefined")}function gr(e,r){var t=e.needCallBack;0===t||1===t?(0!==t||Ie.isFunction(r)||(r=function(){}),Ie.isFunction(r)?n.iframeHybrid("reLoginDialog",e,r):console.error("errstr is undefined")):console.error("errstr is undefined")}function hr(e){var r=e.action,t=e.data;n.iframeHybrid(r,t)}function mr(e){var r=e.data,t=e.success,o=e.notFound;if(r&&r.url){var i=Ee(t,o);n.iframeHybrid("openAppRuoterPage",r,i)}else console.error("navigate api data.url is  undefined")}function yr(e){var r=e.data,t=e.success,o=e.notFound;if(r&&r.userName&&r.path){r.type||(r.type=0);var i=Ee(t,o);n.iframeHybrid("liveOpenWxApplet",r,i)}else console.error("openWxApp api data.userName or data.path is undefined")}function vr(e){n.iframeHybrid("liveExitWebPage",e)}function br(e){n.iframeHybrid("liveOpenWebPage",e)}function wr(){n.iframeHybrid("canClickableWholeH5Page",{clickable:1})}function _r(){n.iframeHybrid("canClickableWholeH5Page",{clickable:0})}function Pr(e){var r=e.studyCoin;if(!r)return console.error("studyCoin is undefined"),!1;n.iframeHybrid("liveFePayRecharge",{studyCoin:r})}function xr(e,r){if(!e)return console.error("liveSavePhoneToContact data is required"),!1;n.iframeHybrid("liveSavePhoneToContact",e,r)}function Cr(e){var r=e.useFePayUrl,t=e.ablePayZero;if(r){var o="payLiveCourseWith";t&&(o="payLiveCourse"),n.iframeHybrid(o,{useFePayUrl:r})}else console.error("useFePayUrl is undefined")}function kr(e){if("[object Function]"!==Object.prototype.toString.call(e))return console.error("callback is not function"),!1;n.iframeHybrid("liveShowRealNameAlert",e)}function Ar(e){"function"==typeof e?n.iframeHybrid("getSelectGrade",e):console.error("callback is not a function")}function Ir(){n.iframeHybrid("setSoftInputResize")}function Sr(e){if(e&&e.key){var r={op:"set",k:e.key,v:e.value,g:e.global};n.iframeHybrid("memData",r)}else console.error("key is undefined")}function Nr(e,r){if(e&&e.key){if("function"!=typeof r)return console.error("callback is not function"),!1;var t={op:"get",k:e.key,g:e.global};n.iframeHybrid("memData",t,r)}else console.error("key is undefined")}function jr(e){if(e&&e.url){var r={protocolString:e.url};n.iframeHybrid("APPJumpProtocol",r)}else console.error("protocol is undefined")}function Br(e){"[object Function]"===Object.prototype.toString.call(e)?n.iframeHybrid("goBindPhone",e):console.error("callback is not function")}function Or(e){n.iframeHybrid("enterModiTest",e)}function Tr(){n.iframeHybrid("pageLoadingComplete")}function Lr(e){if(void 0===e&&(e={}),n.iframeHybrid){var r=e.data,t=e.success,o=e.notFound;if(r&&r.packageName){var i=Ee(t,o);n.iframeHybrid("liveOpenApp",r,i)}else console.error("packageName is required!")}else console.error("hybrid is undefined")}function Hr(e){n.iframeHybrid("openOnlineService",e)}function Er(){n.iframeHybrid("openCachelist")}function Rr(){n.iframeHybrid("openSalelist")}function Wr(e){var r=e.url,t=e.evalStr;if(r){t||(t="javascript:window&&window.orderListPageRefresh&&window.orderListPageRefresh();void(0);");var o={url:r,evalStr:t};n.iframeHybrid("openOrderWindow",o)}else console.error("openOrderWindow url is not function")}var Ur="commonHideTitleBar";function Dr(){n.iframeHybrid(Ur,{is_hide:1})}function Fr(){n.iframeHybrid(Ur,{is_hide:0})}function qr(e){e&&e.title?n.iframeHybrid("commonUpdateBarTitle",e):console.error("title is undefined")}function Mr(e){if(!e)return console.error("param is undefined!"),!1;var r="";switch(e.type){case"hint":r="playVideoHint";break;case"live":r="playLiveVideo";break;case"pure":r="playPureVideo";break;default:r="playVideo"}n.iframeHybrid(r,e)}function Vr(){n.iframeHybrid("disableWebScroll",{isDisable:1})}function Jr(){n.iframeHybrid("disableWebScroll",{isDisable:0})}function Zr(e,r){if(!e||!e.url)return console.error("url is required"),!1;n.iframeHybrid("openLiveWindow",e,r)}window.clientList=window.clientList?window.clientList:{};var Kr={listen:function(e,r){console.log("listen:"+e),window.clientList[e]||(window.clientList[e]=[]),window.clientList[e].push(r),console.log(window.clientList)},trigger:function(e,r){console.log(window.clientList);var n=Array.prototype.shift.call(arguments),t=window.clientList[n];if(console.log("trigger:"+n),console.log(t),!t||0===t.length)return!1;for(var o,i=0;o=t[i++];)o.apply(this,arguments)},remove:function(e,r){console.log("remove:"+e);var n=window.clientList[e];if(!n)return!1;if(r)for(var t=n.length-1;0<=t;t--)n[t]===r&&n.splice(t,1)}},Yr="viewLayout",zr="nativeExit",Gr="updateData",$r="volumnMonitoring",Qr="getWavetime",Xr="resultCallback",en="visitKeyboard",rn="liveCourseAnswerResult",nn="update_refresh",tn="PAGE_ENTER",on="PAGE_LEAVE",an="PAGE_DESTORY",sn=window;function cn(e){return Kr.listen(Yr,e),Kr.listen(en,e),{remove:function(){Kr.remove(Yr,e),Kr.remove(en,e)}}}function ln(e){return Kr.listen(zr,e),{remove:function(){Kr.remove(zr,e)}}}function un(e){return Kr.listen(Gr,e),{remove:function(){Kr.remove(Gr,e)}}}function dn(e){return Kr.listen($r,e),{remove:function(){Kr.remove($r,e)}}}function fn(e){return Kr.listen(Qr,e),{remove:function(){Kr.remove(Qr,e)}}}function pn(e){return Kr.listen(Xr,e),{remove:function(){Kr.remove(Xr,e)}}}function gn(e){return Kr.listen(tn,e),{remove:function(){Kr.remove(tn,e)}}}function hn(e){return Kr.listen(on,e),{remove:function(){Kr.remove(on,e)}}}function mn(e){return Kr.listen(an,e),{remove:function(){Kr.remove(an,e)}}}function yn(e){return Kr.listen(rn,e),{remove:function(){Kr.remove(rn,e)}}}function vn(e){return Kr.listen(nn,e),{remove:function(){Kr.remove(nn,e)}}}sn._NATIVE_CALLBACK=function(e){if(console.log(e),e&&e.action_type){var r=e.action_type,n=e.data?e.data:"";"appWillBecomeActive"===r?(ke.isIPhone()||ke.isIPad())&&Kr.trigger(tn,n):"appDidBecomeActive"===r?Kr.trigger(tn,n):"appOnPause"===r?Kr.trigger(on,n):"appWillResignActive"===r?(ke.isIPhone()||ke.isIPad())&&Kr.trigger(on,n):"liveVcDidDisappeared"===r?Kr.trigger(an,n):Kr.trigger(r,n)}else console.error("action_type is undefined")},sn.NATIVE_CALLBACK||(sn.NATIVE_CALLBACK=sn._NATIVE_CALLBACK);var bn={};function wn(e,r,n){if(e&&Ie.isFunction(r)&&(Kr.listen(e,r),!n))if(ve)sn[e]=function(r){Kr.trigger(e,r)};else if(void 0!==sn.ZCefClient){var t=function(r){Kr.trigger(e,r)};bn[e]||(bn[e]=[]),bn[e].push(t),sn.ZCefClient.addEventListener(e,t)}}function _n(e,r,n){if(e&&Ie.isFunction(r)&&(Kr.remove(e,r),!n))if(ve)sn[e]&&delete sn[e];else if(void 0!==sn.ZCefClient)for(var t=bn[e]||[],o=0,i=t.length;o<i;o++){var a=t[o];a===r&&sn.ZCefClient.removeEventListener(e,a)}}var Pn=Object.freeze({__proto__:null,checkIsInApp:be,checkSystem:ke,getSystemInformation:we,getProductionName:_e,getVersionCode:Pe,getVersionCodeName:xe,isInOwnApp:Ce,get hybrid(){return n.iframeHybrid},getCommonParameters:function(e){if("[object Function]"!==Object.prototype.toString.call(e))return console.error("callback is not function"),!1;var r=z(e),n=G(e);return Q("common").then(r,n)},scoreUpdate:Re,commonLog:We,liveNlog:Ue,requestDataFromNative:De,request:function(e,r){if(e.type)if("post"!==e.type)console.error("http type only support post");else if(e.url){if(e.params)return n.iframeHybrid("httpRequst",e,r);e.params={}}else console.error("http url is required");else console.error("http type is required")},timeSync:Fe,exitH5:qe,startRecord:Me,endRecord:Ve,playAudioZyb:Je,pauseAudioZyb:function(){n.iframeHybrid?n.iframeHybrid("ZybPausePlayAudio"):console.error("hybrid is undefined")},stopAudioZyb:function(){n.iframeHybrid?n.iframeHybrid("ZybStopPlayAudio"):console.error("hybrid is undefined")},playAudio:function(e){if(n.iframeHybrid){var r=e.data,t=e.success,o=e.error,i=e.complete,a=e.notFound,s=e.interrupt;if(r&&r.srcName&&X(r.srcName)){var c=(l=t,u=i,d=o,f=a,p=s,(Ie.isFunction(l)||Ie.isFunction(u)||Ie.isFunction(d))&&(g=function(e,r){if(g.remove=function(e){e&&window[e]&&delete window[e],Ze=[]},e)switch(e.code){case 202:Ie.isFunction(u)&&u.call(window,e);break;case 500:Ie.isFunction(d)&&d.call(window,e);break;case Be:Ie.isFunction(f)&&f.call(window,e);break;case 200:Ie.isFunction(l)&&l.call(window,e),Ze.push(r),g.remove=function(e){};break;case 403:Ie.isFunction(p)&&p.call(window,e),g.remove=function(e){if(Ze&&!(Ze.length<1)){var r=Ze.splice(Ze.length-2,1)[0];r&&window[r]&&delete window[r]}}}}),g);n.iframeHybrid("playAudio",r,c)}else console.error("srcName is undefined")}else console.error("hybrid is undefined");var l,u,d,f,p,g},stopAudio:function(e){if(void 0===e&&(e={}),n.iframeHybrid){var r=e.data,t=e.success,o=e.notFound;r&&r.srcName||(r={});var i=Ee(t,o);n.iframeHybrid("closeWebAudio",r,i)}else console.error("hybrid is undefined")},exerciseFinish:Ke,liveCourseAnswerResult:Ye,submitTestSuccess:ze,login:function(e){var r=e.action,t=e.data,o=e.callback;switch(r||(r="login"),r){case"mall":r="loginMall",t={};break;case"for-result":if(r="loginForResult","function"!=typeof o)return console.error(r+" callback is not a function"),!1}n.iframeHybrid(r,t,o)},checkIsLogin:function(e){if("function"!=typeof e)return console.error("checkIsLogin callback is not a function"),!1;n.iframeHybrid("is_login",e)},download:function(e,r){return e?e.url?e.type?void n.iframeHybrid("downloadMedia",e,r):(console.error("type is undefined"),!1):(console.error("url is undefined"),!1):(console.error("data is undefined"),!1)},setStorage:Ge,getStorage:$e,toast:Qe,enterLiveRoom:Xe,enterPlayBackRoom:er,runtimeLog:rr,appConsoleLog:nr,disableBack:tr,ableBack:or,goBack:function(e){void 0===e&&(e={});var r=e.exit,t=e.noteach,o=!0===r?1:0,i=ve?n.iframeHybrid:ce===se?"":window.parent.h5PluginAction;i?t?i("exit",{finishPage:o}):(i("webCacheFinishPage",{finishPage:o}),i("closeWebCacheVc")):console.error("hybrid is undefined")},setBackMode:ir,getLocation:ar,getUserinfo:sr,interceptSaveAddress:cr,showCalendar:lr,photoQuestion:ur,photoUpload:function(e,r){Ie.isFunction(r)?n.iframeHybrid("cameraUpload",e,r):console.error("callback is not a function")},chatWithRobot:dr,commentReply:fr,teacherCommentDetail:pr,reLoginDialog:gr,showDialog:function(e,r){var t,o=e.description,i=e.neutralText,a=e.negativeText,s=e.positiveText,c=e.cancelOutside;t=i?{description:o,neutralText:i,cancelOutside:c}:{description:o,negativeText:a,positiveText:s,cancelOutside:c},n.iframeHybrid("showDialog",t,r)},gotoPage:hr,navigate:mr,openWxApp:yr,closeWebPage:vr,openWebPage:br,disableClickWholeH5Page:wr,ableClickWholeH5Page:_r,commonPay:function(e,r){return e?"[object Function]"!==Object.prototype.toString.call(r)?(console.error("callback is not function"),!1):void n.iframeHybrid("liveCommonFePayPay",e,r):(console.error("options is undefined"),!1)},rechargeCoin:Pr,saveUserInformation:xr,redirectToPayPage:Cr,showRealNameAlert:kr,callPhoneKeyboard:function(e){e&&e.phone?n.iframeHybrid("dial",e):console.error("phone is undefined")},getSelectGrade:Ar,setInputPositionOnFocus:Ir,copyToClipboard:function(e){if(!e||!e.content)return console.error("content is undefined"),!1;n.iframeHybrid("copyToClipboard",e)},setMemory:Sr,getMemory:Nr,commonJumpPage:jr,gotoBindPhone:Br,enterTest:Or,isWifi:function(e){if("[object Function]"!==Object.prototype.toString.call(e))return console.error("callback is not function"),!1;n.iframeHybrid("isWIFI",e)},pageLoadingComplete:Tr,liveOpenApp:Lr,openCustomerService:Hr,openCachelist:Er,openSalelist:Rr,openOrderWindow:Wr,share:function(e,r){if(e){var t="";e.is_cache?t="showCacheActivityShare":"true"===e.is_share?t="show_share":(t="share",e.is_share="false"),n.iframeHybrid(t,e,r)}else console.error("share param is undefined")},hideTitleBar:Dr,showTitleBar:Fr,editBarTitle:qr,playVideo:Mr,disableWebScroll:Vr,ableWebScroll:Jr,openWindow:function(e,r){var t=e.url,o=e.dialogTitle,i=e.dialogSubTitle,a=e.positiveText,s=e.negativeText,c=e.dialogCloseBtn,l=e.hideNav;if(!t)return console.error("url is required"),!1;var u={url:t,dialogTitle:o,dialogSubTitle:i,dialogLeftText:a,dialogRightText:s,dialogCloseBtn:c,hideNav:l};n.iframeHybrid("openWindow",u,r)},openLiveWindow:Zr,listenNativeExit:ln,listenUpdateData:un,listenVolumnMonitoring:dn,listenGetWavetime:fn,listenResultCallback:pn,listenVisitKeyboard:cn,listenLiveCourseAnswerResult:yn,listenUpdateRefresh:vn,listenPageEnter:gn,listenPageLeave:hn,listenPageDestory:mn,on:wn,off:_n}),xn=function(){return(xn=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},Cn={style:0,title:"",content:"",contentWeibo:"",url:"",imgBase64:"",imgUrl:"",origin:"",fileExtension:"",shotScreen:0,channelArray:[0,1,2,3,4],directChannel:-1},kn={url:"",type:0},An=1==+O.jsBridge_isNewJsBridge&&210<=O.jsBridge_vcnum;function In(e,r){var n=z(r),t=G(r);return An?p(e).then(n,t):Q("backup_FIRE",e).then(n,t)}var Sn=Object.freeze({__proto__:null,openWindow:function(e){var r={pageUrl:e.url,hideNavBar:e.hideNav};e.businessData&&(r.businessData=e.businessData),b(r)},openOrderWindow:function(e,r){var n={pageUrl:e.url};e.businessData&&(n.businessData=e.businessData);var t=z(r),o=G(r);return b(n).then(t,o)},openLiveWindow:function(e){var r={pageUrl:e.url,hideNavBar:e.hideNav,hideStatusBar:e.hideStatus,screenDirection:e.isLandscape?2:e.landscapeType,swapBack:e.sweepBack};e.businessData&&(r.businessData=e.businessData),b(r)},goBack:function(e){var r=e&&e.exit?1:0;y({backWindow:r})},share:function(e,r){var n={title:e.share_title,content:e.share_text,url:e.share_url,imgUrl:e.share_img,origin:e.share_origin,channelArray:e.share_type,contentWeibo:e.share_text_weibo,style:e.style,imgBase64:e.imgBase64,fileExtension:e.fileExtension,shotScreen:e.shotScreen,directChannel:e.directChannel,businessData:e.businessData};n=function(e){for(var r in e)void 0===e[r]&&delete e[r];return e}(n);var t=xn(xn({},Cn),n),o=z(r),i=G(r);return _(t).then(o,i)},login:function(e){var r=e.data,n=e.callback,t=z(n),o=G(n);return v(r).then(t,o)},checkIsLogin:function(e){var r=z(e),n=G(e);return f().then(r,n)},commonLog:function(e){var r={name:e.name,param:e.data,act:e.act||0};L(r)},runtimeLog:function(e){L(e)},appConsoleLog:function(e){L(e)},photoUpload:function(e,r){var n=z(r),t=G(r);return k(e).then(n,t)},callPhoneKeyboard:function(e){x(e)},download:function(e,r){var n=xn(xn({},kn),e),t=z(r),o=G(r);return C(n).then(t,o)},copyToClipboard:function(e){g(e)},playAudio:function(e){var r=xn({},e);r.data.playStatus=1,h(r)},stopAudio:function(e){var r=xn({},e);r.data.playStatus=-1,h(r)},pauseAudioZyb:function(){h({data:{playStatus:0,url:""}})},stopAudioZyb:function(){h({data:{playStatus:-1,url:""}})},showDialog:function(e,r){var n=z(r),t=G(r);return P(e).then(n,t)},isWifi:function(e){return H().then(function(r){return void 0===r&&(r={}),e&&e(r),Promise.resolve(r)},function(r){return e&&e(r),Promise.reject(r)})},request:function(e,r){var n=z(r),t=G(r);return w(e).then(n,t)},getCommonParameters:function(e){var r=z(e),n=G(e);return m().then(r,n)},commonPay:In}),Nn=window;window.__jsBridge={callbackPool:{},ack_no:1},window.__jsBridge.invoke=function(e,r,n){var t="cbk_"+(new Date).getTime(),o={action:e};r&&(o.param=r),n&&(t="cbk_"+window.__jsBridge.ack_no++,o.callbackKey=t,window.__jsBridge.callbackPool[t]=n,"core_windowConfig"==e&&(window.__jsBridge.callbackPool[e]=n));var i=window.__jsBridge.param(o);window.ZYBJSBridge?window.ZYBJSBridge.postMessage(i):window.webkit.messageHandlers.ZYBJSBridge.postMessage(i)},window.__jsBridge.callback=function(e){var r=e.callbackKey,n=window.__jsBridge.callbackPool[r];"function"==typeof n&&(delete e.callbackKey,n(e),n.remove||delete window.__jsBridge.callbackPool.callbackKey)},window.__jsBridge.param=function(e){return JSON.stringify(e)||""},O.jsBridge_isNewJsBridge,O.jsBridge_os_version,O.jsBridge_vc;var jn=1==+O.jsBridge_isNewJsBridge&&210<=O.jsBridge_vcnum?Sn:Pn,Bn=jn.openWindow,On=jn.goBack,Tn=jn.getCommonParameters,Ln=jn.share,Hn=jn.login,En=jn.checkIsLogin,Rn=jn.photoUpload,Wn=jn.callPhoneKeyboard,Un=jn.download,Dn=jn.copyToClipboard,Fn=jn.playAudio,qn=jn.stopAudio,Mn=jn.pauseAudioZyb,Vn=jn.stopAudioZyb,Jn=jn.showDialog,Zn=jn.isWifi,Kn=jn.request,Yn=K;n.ableBack=or,n.ableClickWholeH5Page=_r,n.ableWebScroll=Jr,n.appConsoleLog=nr,n.callPhoneKeyboard=Wn,n.chatWithRobot=dr,n.checkIsInApp=be,n.checkIsLogin=En,n.checkSystem=ke,n.closeWebPage=vr,n.commentReply=fr,n.commonAPI=Yn,n.commonJumpPage=jr,n.commonLog=We,n.commonPay=In,n.copyToClipboard=Dn,n.disableBack=tr,n.disableClickWholeH5Page=wr,n.disableWebScroll=Vr,n.download=Un,n.editBarTitle=qr,n.endRecord=Ve,n.enterLiveRoom=Xe,n.enterPlayBackRoom=er,n.enterTest=Or,n.exerciseFinish=Ke,n.exitH5=qe,n.getCommonParameters=Tn,n.getLocation=ar,n.getMemory=Nr,n.getProductionName=_e,n.getSelectGrade=Ar,n.getStorage=$e,n.getSystemInformation=we,n.getUserinfo=sr,n.getVersionCode=Pe,n.getVersionCodeName=xe,n.goBack=On,n.gotoBindPhone=Br,n.gotoPage=hr,n.hideTitleBar=Dr,n.hybrid=N,n.imgBrowser=j,n.interceptSaveAddress=cr,n.isAppInstalled=B,n.isInOwnApp=Ce,n.isWifi=Zn,n.listenGetWavetime=fn,n.listenLiveCourseAnswerResult=yn,n.listenNativeExit=ln,n.listenPageDestory=mn,n.listenPageEnter=gn,n.listenPageLeave=hn,n.listenResultCallback=pn,n.listenUpdateData=un,n.listenUpdateRefresh=vn,n.listenVisitKeyboard=cn,n.listenVolumnMonitoring=dn,n.liveCourseAnswerResult=Ye,n.liveNlog=Ue,n.liveOpenApp=Lr,n.login=Hn,n.navigate=mr,n.off=_n,n.on=wn,n.openBrowser=E,n.openCachelist=Er,n.openCustomerService=Hr,n.openLiveWindow=Zr,n.openOrderWindow=Wr,n.openSalelist=Rr,n.openWebPage=br,n.openWindow=Bn,n.openWxApp=yr,n.pageLoadingComplete=Tr,n.pauseAudioZyb=Mn,n.photoQuestion=ur,n.photoUpload=Rn,n.playAudio=Fn,n.playAudioZyb=Je,n.playVideo=Mr,n.postMessageHybrid=function(e,r,t){var o=Ae.jsBridge_os_version;o=o?o.substr(0,3):10,ke.isAndroid()&&+o<4.2?n.iframeHybrid(e,r,t):(r&&"[object Function]"===Object.prototype.toString.call(r)&&(t=r,r={}),t&&(Nn[e]=t),window.__jsBridge.invoke(e,r,t))},n.reLoginDialog=gr,n.rechargeCoin=Pr,n.redirectToPayPage=Cr,n.removeNativeLoading=D,n.request=Kn,n.requestDataFromNative=De,n.runtimeLog=rr,n.saveUserInformation=xr,n.scoreUpdate=Re,n.setBackMode=ir,n.setInputPositionOnFocus=Ir,n.setMemory=Sr,n.setStorage=Ge,n.share=Ln,n.showCalendar=lr,n.showDialog=Jn,n.showRealNameAlert=kr,n.showTitleBar=Fr,n.startRecord=Me,n.stopAudio=qn,n.stopAudioZyb=Vn,n.submitTestSuccess=ze,n.teacherCommentDetail=pr,n.timeSync=Fe,n.toast=Qe,n.transformCacheUrl=function(e){return"1"===function(e){for(var r=window.location.search.substring(1).split("&"),n=0;n<r.length;n++){var t=r[n].split("=");if("zybhost"===t[0])return t[1]}return!1}()?function(e){if("string"!=typeof e)throw new Error("url must be string");return"zybhost://"+e.match(/^(.*\/\/)?(.*)$/)[2]}(e):e},n.windowConfig=Z}),k=(x=C)&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x,A=(C.iframeHybrid,C.ableBack,C.ableClickWholeH5Page,C.ableWebScroll,C.appConsoleLog,C.callPhoneKeyboard,C.chatWithRobot,C.checkIsInApp,C.checkIsLogin,C.checkSystem,C.closeWebPage,C.commentReply,C.commonAPI,C.commonJumpPage,C.commonLog,C.commonPay),I=(C.copyToClipboard,C.disableBack,C.disableClickWholeH5Page,C.disableWebScroll,C.download,C.editBarTitle,C.endRecord,C.enterLiveRoom,C.enterPlayBackRoom,C.enterTest,C.exerciseFinish,C.exitH5,C.getCommonParameters),S=(C.getLocation,C.getMemory,C.getProductionName,C.getSelectGrade,C.getStorage,C.getSystemInformation,C.getUserinfo,C.getVersionCode,C.getVersionCodeName,C.goBack,C.gotoBindPhone,C.gotoPage,C.hideTitleBar,C.hybrid);function N(e,i,s){var c=this,l=e.payChannel,u=e.returnUrl,d=(e.appChannel,e.source),f=i.payInfo;return new Promise(function(e,p){return n(c,void 0,void 0,function(){var c;return t(this,function(p){switch(p.label){case 0:switch(console.log("🚗-》进行支付",l),l){case 1:case 2:case 15:case 8:case 26:return[3,1];case 32:return[3,3];case 24:return[3,5];case 9:return[3,7];case 4:return[3,8];case 12:return[3,9];case 6:return[3,10];case 7:return[3,12];case 33:case 11:return[3,13];case 13:return[3,14]}return[3,16];case 1:return[4,j(l,i,d,s)];case 2:return c=p.sent(),[3,16];case 3:return[4,j(1,i,d,s)];case 4:return c=p.sent(),[3,16];case 5:return console.log("qq支付改成3了"),[4,j(3,i,d,s)];case 6:return c=p.sent(),[3,16];case 7:return c={errNo:0,errstr:"success",data:i},[3,16];case 8:return console.log("家长代付",f),c={errNo:0,errstr:"success",data:{payInfo:f}},[3,16];case 9:return c=o[99],function(e){var r=e.params.replace("jsonRequestData=","");console.log("params--\x3e>",r);var n=document.createElement("div");n.id="onlinePayForm";var t="\n        <form action="+e.uri+' method="post" style="position: fixed; left: -1000px">\n            <input type="hidden" name="jsonRequestData"\n                value='+r+' />\n            <input type="hidden" name="charset" value=\'UTF-8\' />\n            <input type="submit" value="提交" id=\'onlinePayBtn\'>\n        </form>\n        ';n.innerHTML=t,document.body.appendChild(n),document.getElementById("onlinePayBtn").click(),document.body.removeChild(n)}(f),[3,16];case 10:return[4,function(e){var r=this;return new Promise(function(o,i){return n(r,void 0,void 0,function(){var r;return t(this,function(i){switch(i.label){case 0:return[4,function(e){var r=this;return new Promise(function(o,i){return n(r,void 0,void 0,function(){var r;return t(this,function(n){switch(n.label){case 0:return"undefined"!=typeof WeixinJSBridge?[3,1]:(document.addEventListener?document.addEventListener("WeixinJSBridgeReady",a,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",a),document.attachEvent("onWeixinJSBridgeReady",a)),[3,3]);case 1:return[4,a(e)];case 2:r=n.sent(),o(r),n.label=3;case 3:return[2]}})})})}(e)];case 1:return r=i.sent(),console.log("微信端内返回的结果",r),o(r),[2]}})})})}(f)];case 11:return c=p.sent(),[3,16];case 12:return function(e,r){location.href=e+"&redirect_url="+r}(f,u),c=o[99],[3,16];case 13:return function(e){location.href=e}(f),c=o[99],[3,16];case 14:return[4,function(e){return e.timeStamp=""+e.timeStamp,new Promise(function(n,t){wx.requestPayment(r({},e,{success:function(e){n({errNo:0,errstr:"支付成功"})},fail:function(e){n({errNo:1,errstr:"支付失败"})},complete:function(){}}))})}(f)];case 15:return c=p.sent(),[3,16];case 16:return e(c),[2]}})})})}function j(e,r,n,t){return new Promise(function(o,i){var a=r.payInfo;if(console.log("进入判断"),console.log("vc的版本号--》》",t),c.isParentApp&&246<=t.vc||c.isYikeApp&&c.isIOS&&175<=t.vc||c.isYikeApp&&c.isAndroid&&169<=t.vc||"zyb_fudao"!==n||26===e||c.isVipApp&&"zyb_fudao"===n&&15===e){var s={channel:e,info:a,source:1};return console.log("进入新的的支付"),console.log("info信息",s),void A(s,function(e){console.log("app支付结果",e),B(e,o)})}"zyb_fudao"===n&&(console.log("进入老的支付"),2!==e&&3!==e||(a=JSON.stringify(a)),console.log("payinfo--\x3e>",a),S("liveCommonFePayPay",{payChannel:e,payPrice:r.price/100,payInfo:a,isNewSdk:!0},function(e){console.log("app支付结果",e),B(e,o)}))})}function B(e,r){var n;switch(e.status){case 0:o[0].errInfo=e,n=o[e.status];break;case 1:o[1].errInfo=e,n=o[e.status];break;case 2:o[2].errInfo=e,n=o[e.status];break;default:o[3].errstr=e.errstr||"支付参数异常",o[3].errInfo=e,n=o[3]}r(n)}function O(e,r){var o=this;return new Promise(function(i,a){return n(o,void 0,void 0,function(){var n;return t(this,function(t){return console.log("channel--\x3e",r),!c.isInApp||c.isIOS||"huawei"!==r?(console.log("cahnnel--\x3e","不支持华为"),i(!1)):c.isParentApp&&281<=e?(n=!1,console.log("app"),setTimeout(function(){n||(Promise.resolve().then(function(){h.uploadAppError({actionName:"huaweipaysupport",errNo:1,errstr:"此action无回调",url:window.location.href})}),i(!1))},7e3),S("huaweipaysupport",{},function(e){n=!0,console.log("进入华为支付判断了--》》",e);var r=!!e.status;i(r)})):(console.log("cahnnel--\x3e","家长端不支持华为"),i(!1)),[2]})})})}C.imgBrowser,C.interceptSaveAddress,C.isAppInstalled,C.isInOwnApp,C.isWifi,C.listenGetWavetime,C.listenLiveCourseAnswerResult,C.listenNativeExit,C.listenPageDestory,C.listenPageEnter,C.listenPageLeave,C.listenResultCallback,C.listenUpdateData,C.listenUpdateRefresh,C.listenVisitKeyboard,C.listenVolumnMonitoring,C.liveCourseAnswerResult,C.liveNlog,C.liveOpenApp,C.login,C.navigate,C.off,C.on,C.openBrowser,C.openCachelist,C.openCustomerService,C.openLiveWindow,C.openOrderWindow,C.openSalelist,C.openWebPage,C.openWindow,C.openWxApp,C.pageLoadingComplete,C.pauseAudioZyb,C.photoQuestion,C.photoUpload,C.playAudio,C.playAudioZyb,C.playVideo,C.postMessageHybrid,C.reLoginDialog,C.rechargeCoin,C.redirectToPayPage,C.removeNativeLoading,C.request,C.requestDataFromNative,C.runtimeLog,C.saveUserInformation,C.scoreUpdate,C.setBackMode,C.setInputPositionOnFocus,C.setMemory,C.setStorage,C.share,C.showCalendar,C.showDialog,C.showRealNameAlert,C.showTitleBar,C.startRecord,C.stopAudio,C.stopAudioZyb,C.submitTestSuccess,C.teacherCommentDetail,C.timeSync,C.toast,C.transformCacheUrl,C.windowConfig;var T={};function L(e,r,n,t){return void 0===n&&(n="POST"),void 0===t&&(t=!1),new Promise(function(t,o){var i,a;console.log("进入payUi请求了");try{i=new XMLHttpRequest,r=function(e,r){return void 0===r&&(r={}),-1===e.indexOf("/payui/cashier/payment")&&-1===e.indexOf("/payui/cashier/getpaymentinfo")&&-1===e.indexOf("/payui/contract/listchannel")?Object.assign(r,T):r}(e,r),a=function(e){return void 0===e&&(e={}),Object.keys(e).length?Object.keys(e).map(function(r){return r+"="+e[r]}).join("&"):""}(r)}catch(e){Promise.resolve().then(function(){h.uploadExpError({actionName:"expError",message:"trycatch",params:a||"expError",trycatchInfo:e.message.substr(0,100)||"发生错误了",errInfo:String(e).substr(0,100)})}),console.log("错误信息--》》",e)}i.withCredentials=!0,"GET"===n?(i.open(n,e+"?"+a,!0),i.send(null)):"POST"===n?(i.open(n,e,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),console.log("🚗--》",a),i.send(a)):o(new Error("不支持"+n+"的请求方式")),console.log("进入payUionreadystatechange请求了"),i.onreadystatechange=function(){if(4===i.readyState)try{if(200===i.status){var r=JSON.parse(i.responseText||null);console.log("ajax返回的结果200",r),function(e,r){-1<e.indexOf("/payui/cashier/payment")||-1<e.indexOf("/payui/cashier/getpaymentinfo")?0===r.errNo&&r.data&&(T={cashierToken:r.data.cashierToken||""}):-1<e.indexOf("/payui/contract/listchannel")&&0===r.errNo&&r.data&&(T={contractToken:r.data.contractToken||""})}(e,r),t(r)}else 200!==i.status?(r={errNo:i.status,errstr:"服务器异常"},console.log("限流提醒"),t(r)):o(i)}catch(r){o(i)}}})}var H={},E="/payui",R=!0,W=(U.prototype.getSystemInfo=function(e){var r=this;return new Promise(function(o,i){return n(r,void 0,void 0,function(){var r;return t(this,function(i){switch(i.label){case 0:return this.payClient="ali"===this.payEnv?"wap":this.payEnv,[4,function(e){var r=this;return console.log("进入action调用"),new Promise(function(o,i){return n(r,void 0,void 0,function(){var r,n;return t(this,function(t){return n=!1,"app"===e?(console.log("app"),setTimeout(function(){n||(Promise.resolve().then(function(){h.uploadAppError({actionName:"common",errNo:1,errstr:"此action无回调",url:window.location.href})}),o(null))},5e3),I(function(e){n=!0;var t=c.isYikeApp?e.ykvc||"":e.vc||"";r={cuid:e.cuid||"",appType:e.os||"",vc:t,city:e.city||"",province:e.province||"",vcname:e.vcname||"",channel:e.channel||"",device:e.device||"",grade:e.grade||"",os_type:e.os||"",sdk:e.sdk||"",os:e.os||""},console.log("action调用回来了"),o(r)})):(console.log("not app"),o(l())),[2]})})})}((r=this).payEnv)];case 1:return r.systemInfo=i.sent(),this.isExecute=!0,F({errNo:0,errstr:"success",data:{data:Object.assign({payClient:this.payClient},this.systemInfo)}},o,e),[2]}})})})},U.prototype.pay=function(e,r,o){var a=this;return console.log("preOrdercallbak--\x3e>",r),console.log("callback--\x3e>",o),new Promise(function(s,c){return n(a,void 0,void 0,function(){var n,a,c,l;return t(this,function(t){switch(t.label){case 0:return"[object Object]"!==Object.prototype.toString.call(e)&&Promise.reject("error,args参数应为一个对象"),console.log("pay_args",e),8!==e.payChannel?[3,4]:this.isExecute?[3,2]:[4,this.getSystemInfo()];case 1:t.sent(),t.label=2;case 2:return[4,this.applePay(e,o)];case 3:return n=t.sent(),r&&r(n),F(n,s,o),[2];case 4:return e=Object.assign(e,this.commonParams),"wx"===this.payEnv&&({},a=this.openId?{openId:this.openId}:{wxUser:this.wxUser},e=Object.assign(e,a,{wxAppId:this.wxAppId})),q("PAY",e=Object.assign(e,this.systemInfo),s,function(){var n=_(i.PAY,e);r&&r(n)})?[4,function(e){return L(H.baseUrl+E+"/cashier/pay",e,"POST")}(e)]:[2];case 5:return 0!==(c=t.sent()).errNo?[3,7]:(this.iconPayInfo=c.data||"",r&&r(c),console.log("wakePayAction的systemInfo---\x3e>",this.systemInfo),[4,N(e,c.data,this.systemInfo)]);case 6:return(c=t.sent()).resFrom=1,l=this.systemInfo?this.systemInfo.appType:"",M(c,l),F(c,s,o),[3,8];case 7:r&&r(c),D(c,s,o),t.label=8;case 8:return[2]}})})})},U.prototype.applePay=function(e,r){var o=this;return new Promise(function(r,i){return n(o,void 0,void 0,function(){var n;return t(this,function(t){switch(t.label){case 0:return q("APPLEPAY",e,r)?[4,N({payChannel:8},{payInfo:{productId:e.productId,orderId:e.orderId}},this.systemInfo)]:[2];case 1:return M(n=t.sent(),"ios"),r(n),[2]}})})})},U.prototype.getPayList=function(e,r){var o=this;return console.log("payENV--\x3e>>",this.payEnv),"[object Object]"!==Object.prototype.toString.call(e)&&Promise.reject("error,args参数应为一个对象"),new Promise(function(i,a){return n(o,void 0,void 0,function(){var n,o,a,s,l,d,f;return t(this,function(t){switch(t.label){case 0:return this.isExecute?[3,2]:[4,this.getSystemInfo()];case 1:t.sent(),t.label=2;case 2:return c.isInApp?[4,O(Number((n=this).systemInfo?this.systemInfo.vc:0),this.systemInfo?this.systemInfo.channel:"")]:[3,4];case 3:n.onlyShow=t.sent(),t.label=4;case 4:return console.log("huawei的结果--》",this.onlyShow),console.log("systemInfo---\x3e>",this.systemInfo),o=Object.assign(e,{payClient:this.payClient},this.systemInfo,this.commonParams,{onlyShow:this.onlyShow?4:0}),console.log("paylist参数---\x3e>",o),q("PAYLIST",o,i)?(s=!1,1!==Number(this.commonParams.mode)?[3,6]:(s=!0,[4,function(e){return L(H.baseUrl+E+"/cashier/getpaymentinfo",e,"GET")}(o)])):[2];case 5:return a=t.sent(),[3,8];case 6:return[4,function(e){return L(H.baseUrl+E+"/cashier/payment",e,"GET")}(o)];case 7:a=t.sent(),t.label=8;case 8:return 0!==a.errNo?[3,14]:(l=a,console.log("getpaylist结果--》》",a),a.data.zybCoin&&(this.balanceCoin=a.data.zybCoin.balanceCoin||0),"ali"===this.payEnv&&(l=function(e){for(var r=0,n=0;n<e.data.payChannelList.length;n++)if(11===e.data.payChannelList[n].payChannel){r=n;break}return e.data.payChannelList=[e.data.payChannelList[r]],e}(a)),"wap"===this.payEnv&&c.isTencent&&(l=function(e){for(var r=0;r<e.data.payChannelList.length;r++)11===e.data.payChannelList[r].payChannel&&e.data.payChannelList.splice(r,1);return e}(a)),"wx"!==this.payEnv?[3,13]:(d=a.data.payChannelList||[],this.wxAppId=0<d.length?d[0].wxAppId:"",e.openId||e.wxUser||s?[3,12]:u("code")?[3,9]:(P(this.wxAppId),[3,11])));case 9:return this.wxAuthCode=u("code"),[4,this.getOpenid(e)];case 10:0===(f=t.sent()).errNo?l.data.openId=this.openId:D(f,i,r),t.label=11;case 11:return[3,13];case 12:this.openId=e.openId,this.wxUser=e.wxUser,l.data.openId=e.openId,l.data.wxUser=e.wxUser,t.label=13;case 13:return F(l,i,r),[3,15];case 14:D(a,i,r),t.label=15;case 15:return[2]}})})})},U.prototype.getWechatCode=function(e,r){var o=this;if("wx"===this.payEnv)return new Promise(function(i,a){return n(o,void 0,void 0,function(){var n,o;return t(this,function(t){return(n=u("code"))?(o={errNo:0,errstr:"success",data:n},r&&r(o),i(o)):P(e),[2]})})});Promise.reject("error，当前非微信环境")},U.prototype.getOpenid=function(e){var r=this;return new Promise(function(o,i){return n(r,void 0,void 0,function(){var r;return t(this,function(n){switch(n.label){case 0:return[4,function(e){return L(H.baseUrl+E+"/cashier/getwxopenid",e,"GET")}({wxAppId:this.wxAppId,wxAuthCode:this.wxAuthCode,source:e.source,payClient:this.payEnv,appChannel:e.appChannel})];case 1:return 0===(r=n.sent()).errNo?(this.openId=r.data.openId,o(r)):D(r,o),[2]}})})})},U.prototype.payDocoin=function(e,i){var a=this;return void 0===e&&(e={}),1===arguments.length?"function"==typeof e&&(i=e,e={}):2===arguments.length&&("[object Object]"!==Object.prototype.toString.call(e)&&Promise.reject("error,args参数应为一个对象"),"function"!=typeof i&&Promise.reject("error,callback应为一个函数")),console.log("aaa--\x3e>",e),console.log("bbb---\x3e",i),new Promise(function(s,c){return n(a,void 0,void 0,function(){var n,a;return t(this,function(t){switch(t.label){case 0:return q("PAYDOCOIN",n=r({},e,{coinPay:this.iconPayInfo?JSON.stringify(this.iconPayInfo.payInfo):""},this.commonParams),s)?[4,function(e){return L(H.baseUrl+E+"/cashier/docoinpay",e,"GET")}(n)]:[2];case 1:return 0===(a=t.sent()).errNo?a.data.result?F(o[0],s,i):F(o[1],s,i):D(a,s,i),[2]}})})})},U.prototype.gotoRechargeCoin=function(e,r){void 0===r&&(r={}),r.isredirect||(r.isredirect=!1);var n=decodeURIComponent(r.rechargeUrl);if(c.isInApp){var t=this.systemInfo.vc,o=c.isYikeApp&&(c.isIOS&&175<=t||c.isAndroid&&169<=t),i=c.isParentApp&&c.isAndroid&&246<=t,a=c.isVipApp&&(c.isIOS&&318<=t||c.isAndroid&&643<=t);o||i||a?r.isredirect?c.isParentApp?(setTimeout(function(){k.hybrid("exit",{closeCurrent:1})},250),k.hybrid("openLiveWindow",{url:n})):k.hybrid("closeAndOpenWindow",{url:n}):k.hybrid("openLiveWindow",{url:n},function(e){}):k.rechargeCoin({studyCoin:e})}else r.isredirect?window.location.replace(n):window.location.href=n},U);function U(e){this.payEnv=function(){var e="";return c.isInApp?e="app":c.isWechat?e="wx":c.isXcx?e="miniapp":c.isAliXcx?e="aliminiapp":(e="wap",c.isAli&&(e="ali")),e}(),this.commonParams=e,this.wxAppId="",this.wxAuthCode="",this.openId="",this.wxUser="",this.systemInfo=null,this.iconPayInfo=null,this.balanceCoin=0,this.isExecute=!1,this.payClient="",H.baseUrl=e.baseUrl||"",(R=void 0===e.isAlarm||!!e.isAlarm)&&h.initAlarm(r({},e,{payEnv:this.payEnv}))}function D(e,r,n){var t={errNo:e.errNo,errstr:e.errstr||"支付后台异常"};n&&n(t),r(t)}function F(e,r,n){n&&n(e),r(e)}function q(e,r,n,t){void 0===t&&(t=function(){});var o=_(i[e],r);return-2===o.errNo?(console.log(e+"方法error"),t&&t(),R?(console.log("开始上传paramsError"),Promise.resolve().then(function(){h.uploadParamsError({functionName:e,url:window.location.href,errstr:o.errstr})})):console.log("关闭了alarm功能"),n(o),!1):(console.log(e+"方法pass"),!0)}function M(e,r){console.log("AppError",e.errInfo),R?0!==e.errNo&&2!==e.errNo&&99!==e.errNo&&(console.log("AppError开始报错了",e.errInfo),Promise.resolve().then(function(){h.uploadAppError({actionName:"pay",errNo:e.errInfo.status,errstr:e.errstr,url:window.location.href,os:r})})):console.log("关闭了alarm功能")}function V(e,r){var n={errNo:0,errstr:"参数验证通过"};return r.source&&r.appChannel&&r.authServer||(n.errNo=-2,n.errstr="初始化sdk缺少appChannel、source、authServer参数"),n}function J(e,r){var n={errNo:0,errstr:"参数验证通过"},t=V(0,r);return-2===t.errNo?t:(r.username&&r.uid&&r.requestNo&&r.orderId&&r.contractCode&&r.cnctNotifyUrl||(n.errNo=-2,n.errstr="payAndSign接口参数错误，username、uid、requestNo、orderId、contractCode、cnctNotifyUrl为必传参数"),e-0==1112&&!r.returnUrl&&r.autoRedirect&&(n.errNo=-2,n.errstr="payAndSign接口参数错误，微信支付中签约自动跳转时returnUrl为必传参数"),n)}function Z(e,r){var n={errNo:0,errstr:"参数验证通过"};return r.username&&r.uid&&r.requestNo&&r.contractCode&&r.cnctNotifyUrl||(n.errNo=-2,n.errstr="justSign接口参数错误，username、uid、requestNo、contractCode、cnctNotifyUrl为必传参数"),e-0!=1111||r.userIp||(n.errNo=-2,n.errstr="justSign接口参数错误，微信纯签约userIp为必传参数"),e-0==1111&&!r.returnUrl&&r.autoRedirect&&(n.errNo=-2,n.errstr="justSign接口参数错误，微信纯签约自动跳转时returnUrl为必传参数"),n}function K(e,r,n){return{GetSignList:V,PayAndSign:J,Sign:Z}[e](r,n)}var Y={},z="/payui",G={"-1":{errNo:"参数异常"},0:{errNo:0,errstr:"签约成功"},1:{errNo:1,errstr:"签约失败"},2:{errNo:2,errstr:"签约取消"},3:{errNo:3,errstr:"签约参数异常"},99:{errNo:99,errstr:"签约未知"}};function $(e,r,o,i){var a=this,s=(e.channelName,e.channelNo),c=(e.channelIcon,r.appChannel,r.returnUrl),l=r.autoRedirect,u=JSON.parse(o.contractInfo);return new Promise(function(e,r){return n(a,void 0,void 0,function(){var r;return t(this,function(n){switch(n.label){case 0:switch(console.log("🚗-》进行签约",s),s-0){case 1111:case 1112:return[3,1];case 1213:return[3,2];case 1121:case 1223:case 1321:case 1521:return[3,3]}return[3,5];case 1:return e({errNo:0,preSignData:o,url:u.protocalUrl}),l&&Q(u.protocalUrl,c),[3,5];case 2:return e({errNo:0,preSignData:o,url:u.protocalUrl}),l&&Q(u.protocalUrl),[3,5];case 3:return[4,function(e,r,n){console.log("系统信息--》》",JSON.stringify(n)),console.log("进入app签约--》》",JSON.stringify(r));var t=r.contractInfo,o=t;if(1223===e){var i=JSON.parse(t);o=i.protocalUrl}return new Promise(function(n,t){console.log("commonPay",e,o),A({channel:e,info:o,source:1},function(t){var o;console.log("app签约结果",t),1223===e||1121===e?0===t.status?o=Object.assign({resFrom:1},G[99]):1!==t.status&&2!==t.status?(o=Object.assign({resFrom:1},G[3])).errstr=t.errstr||o.errstr:o=G[t.status]:0===t.status||1===t.status||2===t.status?o=G[t.status]:((o=G[3]).resFrom=1,o.errstr=t.errstr||o.errstr),o.preSignData=r,n(o)})})}(s,o,i)];case 4:return r=n.sent(),e(r),[3,5];case 5:return[2]}})})})}function Q(e,r){setTimeout(function(){location.href=r?e+"&redirect_url="+r:e},100)}var X=(ee.prototype.getSystemInfo=function(e){var r=this;return new Promise(function(o,i){return n(r,void 0,void 0,function(){var r;return t(this,function(i){switch(i.label){case 0:return r=this,[4,function(e){var r=this;return new Promise(function(o,i){return n(r,void 0,void 0,function(){var r;return t(this,function(n){return"app"===e?I(function(e){var n=c.isYikeApp?e.ykvc||"":e.vc||"";r={cuid:e.cuid||"",appType:e.os||"",vc:n,appId:e.appid||e.appId||"",channel:e.channel||"",provider:e.channel||"",sdk:e.sdk||"",os:e.os||""},console.log("getCommonParameters",e),o(r)}):(console.log("not app"),o(l())),[2]})})})}(c.isInApp?"app":"")];case 1:return r.systemInfo=i.sent(),this.isExecute=!0,ne({errNo:0,errstr:"success",data:{data:this.systemInfo}},o,e),[2]}})})})},ee.prototype.getSignList=function(e,r){var o=this;if(!this.isLoading)return this.isLoading=!0,new Promise(function(i,a){return n(o,void 0,void 0,function(){var n,o,a,s;return t(this,function(t){switch(t.label){case 0:return"[object Object]"!==Object.prototype.toString.call(e)&&Promise.reject("error,args参数应为一个对象"),console.log("getSignList_args",e),this.isExecute?[3,2]:[4,this.getSystemInfo()];case 1:t.sent(),t.label=2;case 2:return c.isInApp?[4,O(Number((n=this).systemInfo?this.systemInfo.vc:0),this.systemInfo?this.systemInfo.channel:"")]:[3,4];case 3:n.onlyShow=t.sent(),t.label=4;case 4:return console.log("huawei的结果--》",this.onlyShow),console.log("systemInfo---\x3e>",this.systemInfo),o=Object.assign(e,this.systemInfo,this.commonParams,{onlyShow:this.onlyShow?4:0}),-2===(a=K("GetSignList",0,o)).errNo?(this.isLoading=!1,i(a),[2]):[4,function(e){return L(Y.baseUrl+z+"/contract/listchannel",e,"GET")}(o)];case 5:return 0===(s=t.sent()).errNo?(s=function(e,r){var n,t=[];if("app"!==e){n="tx"===e?[1111,1112,1121]:"ali"===e?[1213,1223]:[1111,1112,1121,1213,1223];for(var o=function(e){if(-1<n.findIndex(function(n){return n===r.data.channelList[e].channelNo-0})&&t.push(r.data.channelList[e]),t.length===n.length)return"break"},i=0;i<r.data.channelList.length&&"break"!==o(i);i++);r.data.channelList=t}return r}(function(){var e="";return c.isInApp?e="app":c.isAli?e="ali":c.isTencent&&(e="tx"),e}(),s),this.isLoading=!1,ne(s,i,r)):(this.isLoading=!1,re(s,i,r)),[2]}})})})},ee.prototype.sign=function(e,r,o,i){var a=this;if(!this.isLoading)return this.isLoading=!0,new Promise(function(s,c){return n(a,void 0,void 0,function(){var n,a,c,l;return t(this,function(t){switch(t.label){case 0:return"[object Object]"!==Object.prototype.toString.call(e)&&Promise.reject("error,channelArgs参数应为一个对象"),"[object Object]"!==Object.prototype.toString.call(r)&&Promise.reject("error,args参数应为一个对象"),console.log("channelArgs",e),console.log("args",r),void 0===r.autoRedirect&&(r.autoRedirect=!0),e.channelNo-0!=1521?[3,1]:(n=r.productId?(a={productId:r.productId,orderId:r.orderId||0},{errNo:0,data:{contractInfo:JSON.stringify(a)}}):{errNo:-2,errstr:"参数错误，苹果签约productId必传"},[3,5]);case 1:return e.contractType-0!=1?[3,3]:(l=Object.assign({},r,{tplId:e.tplId},this.commonParams),console.log("justSign的传餐",l),c=K("Sign",e.channelNo,l),console.log("safdfd",c),-2===c.errNo?(this.isLoading=!1,s(c),[2]):[4,function(e){return L(Y.baseUrl+z+"/contract/precontract",e,"GET")}(l)]);case 2:return n=t.sent(),[3,5];case 3:return e.contractType-0!=2?[3,5]:(l=Object.assign({},r,{tplId:e.tplId,payRuleId:e.ruleId,payChannel:e.payChannel||7},this.systemInfo,this.commonParams),console.log("payAndSign的传餐",l),c=K("PayAndSign",e.channelNo,l),console.log("safdfd",c),-2===c.errNo?(o&&o(c),this.isLoading=!1,s(c),[2]):[4,function(e){return L(Y.baseUrl+z+"/contract/contractorder",e,"GET")}(l)]);case 4:n=t.sent(),t.label=5;case 5:return 0!==n.errNo?[3,7]:(o&&o(n),l=Object.assign({},r,this.commonParams),[4,$(e,l,n.data,this.systemInfo)]);case 6:return n=t.sent(),this.isLoading=!1,ne(n,s,i),[3,8];case 7:o&&o(n),this.isLoading=!1,re(n,s,i),t.label=8;case 8:return[2]}})})})},ee);function ee(e){this.commonParams=e,this.isExecute=!1,this.isLoading=!1,this.systemInfo=null,Y.baseUrl=e.baseUrl||""}function re(e,r,n){var t={errNo:e.errNo,errstr:e.errstr||"后台异常"};n&&n(t),r(t)}function ne(e,r,n){n&&n(e),r(e)}return function(e){return 2===e.type?(delete e.type,new X(e)):(delete e.type,new W(e))}});
