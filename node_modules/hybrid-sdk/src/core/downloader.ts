import {resolveCallbackFactory, rejectCallbackFactory} from "../utils/tool";
import {downloader} from  'hybrid-sdk-common'

interface downloaderParams {
    url: String;  // 资源路径
    type: number;  // 0 other， 1 图片， 2 音频， 3 视频
    base64?: String;  // type为1时，图片的base64编码
    businessData?: any;
}

const defaultPrams: downloaderParams = {
    url: '',
    type: 0,
}


/**
 * 下载资源
 * @param params 
 */
export function download(params: any, callback?: Function): void {
    let _params: downloaderParams = {
        ...defaultPrams,
        ...params
    };

    let success= resolveCallbackFactory(callback);
    let fail= rejectCallbackFactory(callback);
    
    return downloader(_params).then(success, fail);
}