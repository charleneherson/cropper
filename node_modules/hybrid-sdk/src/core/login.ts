import {core_login, checkLogin} from  'hybrid-sdk-common'
import { resolveCallbackFactory, rejectCallbackFactory } from "../utils/tool";


/**
 * 登陆功能
 * @param params 
 */
export function login(params: any): void {
    let _params = params.data;
    let callback = params.callback;
    
    let success= resolveCallbackFactory(callback);
    let fail= rejectCallbackFactory(callback);
    return core_login(_params).then(success, fail);
}

/**
 * 重新登陆弹窗
 * @param params 
 */
export function reLoginDialog(callback?: Function): void {
    let _params = {
        reLogin: 1 
    };
    
    let success= resolveCallbackFactory(callback);
    let fail= rejectCallbackFactory(callback);
    return core_login(_params).then(success, fail);
}

/**
 * 检查登陆状态, 适配旧Api
 * @param callback 
 */
export function checkIsLogin(callback?: Function) {
    let success= resolveCallbackFactory(callback);
    let fail= rejectCallbackFactory(callback);
    return checkLogin().then(success, fail);
}