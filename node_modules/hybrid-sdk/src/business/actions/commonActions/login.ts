import { hybrid as handleHybrid } from '../../../utils/iframeHybrid'

/**
 * @description 登陆 可以登陆帮帮商城
 * @param {Object} options
 *   @property {String} action      //默认：login，mail：登陆帮帮商城
 *   @property {Object} data        //参数对象 action==mail?{}:data
 *   @property {Function} callback  //回调函数
 */
export function login (options: any) {
  var { action, data, callback } = options

  if (!action) {
    action = 'login'
  }
  switch (action) {
    case 'mall':
      action = 'loginMall'
      data = {}
      break
    case 'for-result': // 调用native登陆操作,但是仅仅返回login的结果给fe,由fe判断进行reload还是跳转其他h5页面
      action = 'loginForResult'
      if (typeof callback !== 'function') {
        console.error(`${action} callback is not a function`)
        return false
      }
      break
  }
  handleHybrid(action, data, callback)
}

/**
 * @description 检查
 * @param {Function} callback //回调函数
 */
export function checkIsLogin (callback: Function) {
  if (typeof callback !== 'function') {
    console.error('checkIsLogin callback is not a function')
    return false
  }
  handleHybrid('is_login', callback)
}
