import { hybrid as handleHybrid } from '../../../utils/iframeHybrid'

/**
 * @description 保存数据
 * @param {String} saveType "1"  代表内存存储   "2" 代表持久存储
 * @param {String} saveKey
 * @param {Object} saveData  需要保存的数据  必须是基础数据类型
 * @param {Function} callback
 */
export function setStorage (data: any) {
  if (!data || !data.saveKey) {
    console.error('saveKey is required')
    return
  }

  if (!data.saveType) {
    console.error('saveType is required')
    return
  }

  if (data.saveType !== '1' && data.saveType !== '2') {
    console.error('saveType must be 1 or 2')
    return
  }

  handleHybrid('storage', data)
}

/**
 * @description 获取数据
 * @param {String} saveType "1"  代表内存存储   "2" 代表持久存储
 * @param {String} saveKey
 * @param {Function} callback
 */
export function getStorage (data: any, callback: Function) {
  // saveType, saveKey, callback
  if (!data || !data.saveKey) {
    console.error('saveKey is required')
    return
  }
  if (!data.saveType) {
    console.error('saveType is required')
    return
  }

  if (data.saveType !== '1' && data.saveType !== '2') {
    console.error('saveType must be 1 or 2')
    return
  }

  if (!handleHybrid) {
    console.error('hybrid is undefined')
    return
  }
  handleHybrid('getStorageValue', data, callback)
}
