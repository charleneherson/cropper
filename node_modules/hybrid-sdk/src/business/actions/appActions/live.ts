import { hybrid } from '../../../utils/iframeHybrid'

// http://qatest7.suanshubang.com/static/fe-docs/_book/hybrid-sdk/app_pay.html

/**
 * FE公共支付
 * @param {Object} options
 * @param {Function} callback
 */
export function commonPay (options: any, callback: Function) {
  if (!options) {
    console.error('options is undefined')
    return false
  }

  if (Object.prototype.toString.call(callback) !== '[object Function]') {
    console.error('callback is not function')
    return false
  }
  hybrid('liveCommonFePayPay', options, callback)
}

/**
 * @description 学币充值
 * @param {*} studyCoin
 */
export function rechargeCoin (data: any) {
  var { studyCoin } = data
  if (!studyCoin) {
    console.error('studyCoin is undefined')
    return false
  }
  hybrid('liveFePayRecharge', { studyCoin: studyCoin })
}

/**
 * @description 支付成功页跳转到课程主页
 * @param {Object} options
 */
export function saveUserInformation (data: any, callback: Function) {
  if (!data) {
    console.error('liveSavePhoneToContact data is required')
    return false
  }
  hybrid('liveSavePhoneToContact', data, callback)
}

/**
 * @description 跳转到支付页面(如果没有登陆去登陆，否则判断是否绑定手机号，如果没有绑定跳转到绑定手机号页面，否则跳转到支付页面)
 * @param {String} useFePayUrl  //地址
 */
export function redirectToPayPage (data: any) {
  var { useFePayUrl, ablePayZero } = data
  if (!useFePayUrl) {
    console.error('useFePayUrl is undefined')
    return
  }
  var actionName = 'payLiveCourseWith'

  if (ablePayZero) {
    actionName = 'payLiveCourse'
  }
  hybrid(actionName, { useFePayUrl: useFePayUrl })
}

/**
 * @description 展示真实姓名
 * @param {Function} callback
 */
export function showRealNameAlert (callback: Function) {
  if (Object.prototype.toString.call(callback) !== '[object Function]') {
    console.error('callback is not function')
    return false
  }
  hybrid('liveShowRealNameAlert', callback)
}
