{"map":{"version":3,"sources":["pagesModule1/@yaya/director-uni/lib/yaya-scene-write/components/hanziWrite/HanziWriter.js"],"names":["global","push","2a04","module","__webpack_exports__","__webpack_require__","r","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_HanziWriter_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_HanziWriter_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","__WEBPACK_IMPORT_KEY__","key","d","73f5","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_HanziWriter_vue_vue_type_style_index_0_id_7e8d76d0_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_HanziWriter_vue_vue_type_style_index_0_id_7e8d76d0_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","9d6d","exports","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Object","prototype","toString","call","Array","from","isArray","i","arr2","length","defineProperty","value","default","_default","props","height","type","Number","width","backgroundImage","String","option","show","Boolean","data","isQuizzing","rect","options","painting","userCanvas","counter","userStroke","mounted","_this","this","createSelectorQuery","select","fields","node","size","exec","res","canvas","ctx","getContext","dpr","wx","getSystemInfoSync","pixelRatio","scale","methods","connectContext","hanziWriter","writer","_options","disconnectContext","undefined","_touchStart","e","_this2","_getClientBoundingRect","then","_this2$userStroke","quiz","_quiz","onStartUserStroke","character","_character","symbol","strokeNum","_currentStrokeIndex","characterStrokes","_returnCharacterStrokes","strokesRemaining","strokes","x","touches","clientX","left","y","clientY","top","lastPoint","points","addPoint","apply","_touchMove","_this$userStroke","quizInterval","newPoint","ecceedMiniDistance","draw","drawUserStrokeAction","drawLine","save","positioner","_positioner","translate","xOffset","yOffset","transform","convertExternalPoint","map","ele","restore","startPoint","endPoint","miniDistance","difX","difY","_touchEnd","syncUserStroke","slice","clearRect","lineWidth","lineCap","lineJoin","beginPath","start","remainingPoints","moveTo","forEach","point","lineTo","stroke","setIsQuizzing","_this3","Promise","resolve","boundingClientRect","c4a8","_HanziWriter_vue_vue_type_template_id_7e8d76d0_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_HanziWriter_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","ec7f","render","_vm","_h","$createElement","_self","_c","staticRenderFns","ed67"],"mappings":"CAACA,OAAO,gBAAkBA,OAAO,iBAAmB,IAAIC,KAAK,CAAC,CAAC,0FAA0F,CAEnJC,OACA,SAAUC,EAAQC,EAAqBC,GAE7C,aACAA,EAAoBC,EAAEF,GACD,IAAIG,EAAwdF,EAAoB,QAC5eG,EAA6eH,EAAoBI,EAAEF,GAC3f,IAAI,IAAIG,KAA0BH,EAAqf,YAA3BG,GAAuC,SAASC,GAAON,EAAoBO,EAAER,EAAqBO,GAAK,WAAa,OAAOJ,EAAsdI,MAA3iB,CAAsjBD,GAC3lCN,EAAoB,WAAcI,EAA+d,GAIzhBK,OACA,SAAUV,EAAQC,EAAqBC,GAE7C,aACqB,IAAIS,EAAiyBT,EAAoB,QACrzBU,EAAszBV,EAAoBI,EAAEK,GAE1xBC,EAAwyB,GAI72BC,OACA,SAAUb,EAAQc,EAASZ,GAEjC,aAQA,SAASa,EAAmBC,GAAO,OAAOC,EAAmBD,IAAQE,EAAiBF,IAAQG,IAE9F,SAASA,IAAuB,MAAM,IAAIC,UAAU,mDAEpD,SAASF,EAAiBG,GAAQ,GAAIC,OAAOC,YAAYC,OAAOH,IAAkD,uBAAzCG,OAAOC,UAAUC,SAASC,KAAKN,GAAgC,OAAOO,MAAMC,KAAKR,GAE1J,SAASJ,EAAmBD,GAAO,GAAIY,MAAME,QAAQd,GAAM,CAAE,IAAK,IAAIe,EAAI,EAAGC,EAAO,IAAIJ,MAAMZ,EAAIiB,QAASF,EAAIf,EAAIiB,OAAQF,IAAOC,EAAKD,GAAKf,EAAIe,GAAM,OAAOC,GAX7JR,OAAOU,eAAepB,EAAS,aAAc,CAC3CqB,OAAO,IAETrB,EAAQsB,aAAU,EA0ClB,IAAIC,EAAW,CACbC,MAAO,CACLC,OAAQ,CACNC,KAAMC,OACNN,MAAO,KAETO,MAAO,CACLF,KAAMC,OACNN,MAAO,KAETQ,gBAAiB,CACfH,KAAMI,OACNR,QAAS,GACTS,OAAQ,IAEVC,KAAM,CACJN,KAAMO,QACNZ,OAAO,IAGXa,KAAM,WACJ,MAAO,CACLC,YAAY,EACZC,KAAM,KACNC,QAAS,KACTC,UAAU,EACVC,WAAY,KACZC,QAAS,EACTC,WAAY,KAGhBC,QAAS,WACP,IAAIC,EAAQC,KAEZA,KAAKC,sBAAsBC,OAAO,uBAAuBC,OAAO,CAC9DC,MAAM,EACNC,MAAM,IACLC,MAAK,SAAUC,GAChB,IAAIC,EAASD,EAAI,GAAGH,KAChBK,EAAMD,EAAOE,WAAW,MACxBC,EAAMC,GAAGC,oBAAoBC,WACjCN,EAAO3B,OAASkB,EAAMlB,OAAS8B,EAC/BH,EAAOxB,MAAQe,EAAMf,MAAQ2B,EAC7BF,EAAIM,MAAMJ,EAAKA,GACfZ,EAAMJ,WAAaa,MAGvBQ,QAAS,CACPC,eAAgB,SAAwBC,GACtClB,KAAKkB,YAAcA,EACnBlB,KAAKP,QAAUyB,EAAYC,OAAOC,UAEpCC,kBAAmB,WACbrB,KAAKkB,cACPlB,KAAKkB,iBAAcI,IAGvBC,YAAa,SAAqBC,GAChC,IAAIC,EAASzB,KAEbA,KAAK0B,yBAAyBC,MAAK,SAAUnC,GAC3C,IAAIoC,EAEJH,EAAOjC,KAAOA,EACdiC,EAAO/B,UAAW,EAClB,IAAImC,EAAOJ,EAAOP,YAAYC,OAAOW,MAEjCD,EAAKT,SAASW,mBAChBF,EAAKT,SAASW,kBAAkB,CAC9BC,UAAWH,EAAKI,WAAWC,OAC3BC,UAAWN,EAAKO,oBAChBC,iBAAkBR,EAAKS,wBACvBC,iBAAkBV,EAAKI,WAAWO,QAAQjE,OAASsD,EAAKO,oBAAsB,IAIlF,IAAIK,EAAIjB,EAAEkB,QAAQ,GAAGC,QAAUlB,EAAOjC,KAAKoD,KACvCC,EAAIrB,EAAEkB,QAAQ,GAAGI,QAAUrB,EAAOjC,KAAKuD,IAC3CtB,EAAOuB,UAAY,CACjBP,EAAGA,EACHI,EAAGA,GAGL,IAAII,EAASxB,EAAOP,YAAYE,SAAS8B,SAASzB,EAAOuB,YAGxDpB,EAAoBH,EAAO5B,YAAYzD,KAAK+G,MAAMvB,EAAmBvE,EAAmB4F,QAG7FG,WAAY,SAAoB5B,GAC9B,GAAIxB,KAAKN,SAAU,CACjB,IAAI2D,EAEJ,GAAIrD,KAAKJ,QAAUI,KAAKP,QAAQ6D,aAAc,OAAOtD,KAAKJ,UAC1DI,KAAKJ,QAAU,EACf,IAAI6C,EAAIjB,EAAEkB,QAAQ,GAAGC,QAAU3C,KAAKR,KAAKoD,KACrCC,EAAIrB,EAAEkB,QAAQ,GAAGI,QAAU9C,KAAKR,KAAKuD,IACrCQ,EAAW,CACbd,EAAGA,EACHI,EAAGA,GAEL,IAAK7C,KAAKwD,mBAAmBD,EAAUvD,KAAKgD,WAAY,OAExD,IAAIC,EAASjD,KAAKkB,YAAYE,SAAS8B,SAASK,IAG/CF,EAAmBrD,KAAKH,YAAYzD,KAAK+G,MAAME,EAAkBhG,EAAmB4F,IAErF,IAAIQ,EAAOzD,KAAKkB,YAAYE,SAASsC,sBAAwB1D,KAAK2D,SAC9DlD,EAAMT,KAAKL,WAAWe,WAAW,MACrCD,EAAImD,OAEJ,IAAIC,EAAa7D,KAAKkB,YAAYC,OAAO2C,YACzCrD,EAAIsD,UAAUF,EAAWG,QAASH,EAAWhF,OAASgF,EAAWI,SACjExD,EAAIyD,UAAU,EAAG,EAAG,GAAI,EAAG,EAAG,GAC9BzD,EAAIM,MAAM8C,EAAW9C,MAAO8C,EAAW9C,OAEnCf,KAAKH,WAAWtB,OAAS0E,EAAO1E,SAAW,GAC7CkF,EAAKhD,EAAK,CAACoD,EAAWM,qBAAqBnE,KAAKgD,aAGlDS,EAAKhD,EAAKpD,EAAmB4F,EAAOmB,KAAI,SAAUC,GAChD,OAAOR,EAAWM,qBAAqBE,QAEzC5D,EAAI6D,UACJtE,KAAKgD,UAAYO,IASrBC,mBAAoB,SAA4Be,EAAYC,GAC1D,IAAIC,EAAezE,KAAKP,QAAQgF,cAAgB,EAC5CC,EAAOF,EAAS/B,EAAI8B,EAAW9B,EAC/BkC,EAAOH,EAAS3B,EAAI0B,EAAW1B,EAEnC,OAAI8B,EAAOA,EAAOD,EAAOA,EAAOD,EAAeA,GAMjDG,UAAW,SAAmBpD,GAC5BxB,KAAKN,UAAW,EAEhBM,KAAKkB,YAAY2D,eAAe7E,KAAKH,WAAWiF,MAAM,IACtD9E,KAAKH,WAAa,GAClB,IAAIY,EAAMT,KAAKL,WAAWe,WAAW,MACrCD,EAAIsE,UAAU,EAAG,EAAG/E,KAAKhB,MAAOgB,KAAKnB,SAEvC8E,SAAU,SAAkBlD,EAAKwC,GAE/BxC,EAAIuE,UAAY,EAChBvE,EAAIwE,QAAU,QACdxE,EAAIyE,SAAW,QACfzE,EAAI0E,YACJ,IAAIC,EAAQnC,EAAO,GACfoC,EAAkBpC,EAAO6B,MAAM,GACnCrE,EAAI6E,OAAOF,EAAM3C,EAAG2C,EAAMvC,GAC1BwC,EAAgBE,SAAQ,SAAUC,GAChC/E,EAAIgF,OAAOD,EAAM/C,EAAG+C,EAAM3C,MAE5BpC,EAAIiF,UAENC,cAAe,SAAuBpG,GACpCS,KAAKT,WAAaA,GAEpBmC,uBAAwB,WACtB,IAAIkE,EAAS5F,KAEb,OAAO,IAAI6F,SAAQ,SAAUC,GAC3BF,EAAO3F,oBAAoB,uBAAuBC,OAAO,uBAAuB6F,oBAAmB,SAAUvG,GAC3GsG,EAAQtG,MACPc,aAKXlD,EAAQsB,QAAUC,GAIZqH,KACA,SAAU1J,EAAQC,EAAqBC,GAE7C,aACAA,EAAoBC,EAAEF,GACD,IAAI0J,EAA2FzJ,EAAoB,QAC/G0J,EAAyE1J,EAAoB,QACrF,IAAI,IAAIK,KAA0BqJ,EAAsG,YAA3BrJ,GAAuC,SAASC,GAAON,EAAoBO,EAAER,EAAqBO,GAAK,WAAa,OAAOoJ,EAAuEpJ,MAA5J,CAAuKD,GACxNL,EAAoB,QAAlI,IACI2J,EAA2F3J,EAAoB,QASpI4J,EAAYtI,OAAOqI,EAAuG,KAA9GrI,CACdoI,EAAuE,WACvED,EAAsG,KACtGA,EAA+G,MAC/G,EACA,KACA,WACA,MAI2B1J,EAAoB,WAAc6J,EAAiB,SAI1EC,KACA,SAAU/J,EAAQC,EAAqBC,GAE7C,aAGA,IAAI8J,EAAS,WAAa,IAAIC,EAAIvG,KAASwG,EAAGD,EAAIE,eAAsBF,EAAIG,MAAMC,IAC9EC,EAAkB,GAIgBpK,EAAoBO,EAAER,EAAqB,KAAK,WAAa,OAAO+J,KAC3D9J,EAAoBO,EAAER,EAAqB,KAAK,WAAa,OAAOqK,MAK7GC,KACA,SAAUvK,EAAQc,EAASZ"},"code":"(global[\"webpackJsonp\"]=global[\"webpackJsonp\"]||[]).push([[\"pagesModule1/@yaya/director-uni/lib/yaya-scene-write/components/hanziWrite/HanziWriter\"],{\"2a04\":function(t,e,n){\"use strict\";n.r(e);var r=n(\"9d6d\"),i=n.n(r);for(var o in r)\"default\"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e[\"default\"]=i.a},\"73f5\":function(t,e,n){\"use strict\";var r=n(\"ed67\"),i=n.n(r);i.a},\"9d6d\":function(t,e,n){\"use strict\";function r(t){return a(t)||o(t)||i()}function i(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}function o(t){if(Symbol.iterator in Object(t)||\"[object Arguments]\"===Object.prototype.toString.call(t))return Array.from(t)}function a(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var s={props:{height:{type:Number,value:300},width:{type:Number,value:300},backgroundImage:{type:String,default:\"\",option:{}},show:{type:Boolean,value:!0}},data:function(){return{isQuizzing:!1,rect:null,options:null,painting:!1,userCanvas:null,counter:1,userStroke:[]}},mounted:function(){var t=this;this.createSelectorQuery().select(\"#writer-canvas-user\").fields({node:!0,size:!0}).exec((function(e){var n=e[0].node,r=n.getContext(\"2d\"),i=wx.getSystemInfoSync().pixelRatio;n.height=t.height*i,n.width=t.width*i,r.scale(i,i),t.userCanvas=n}))},methods:{connectContext:function(t){this.hanziWriter=t,this.options=t.writer._options},disconnectContext:function(){this.hanziWriter&&(this.hanziWriter=void 0)},_touchStart:function(t){var e=this;this._getClientBoundingRect().then((function(n){var i;e.rect=n,e.painting=!0;var o=e.hanziWriter.writer._quiz;o._options.onStartUserStroke&&o._options.onStartUserStroke({character:o._character.symbol,strokeNum:o._currentStrokeIndex,characterStrokes:o._returnCharacterStrokes,strokesRemaining:o._character.strokes.length-o._currentStrokeIndex-1});var a=t.touches[0].clientX-e.rect.left,s=t.touches[0].clientY-e.rect.top;e.lastPoint={x:a,y:s};var c=e.hanziWriter._options.addPoint(e.lastPoint);(i=e.userStroke).push.apply(i,r(c))}))},_touchMove:function(t){if(this.painting){var e;if(this.counter<this.options.quizInterval)return this.counter++;this.counter=0;var n=t.touches[0].clientX-this.rect.left,i=t.touches[0].clientY-this.rect.top,o={x:n,y:i};if(!this.ecceedMiniDistance(o,this.lastPoint))return;var a=this.hanziWriter._options.addPoint(o);(e=this.userStroke).push.apply(e,r(a));var s=this.hanziWriter._options.drawUserStrokeAction||this.drawLine,c=this.userCanvas.getContext(\"2d\");c.save();var u=this.hanziWriter.writer._positioner;c.translate(u.xOffset,u.height-u.yOffset),c.transform(1,0,0,-1,0,0),c.scale(u.scale,u.scale),this.userStroke.length-a.length===1&&s(c,[u.convertExternalPoint(this.lastPoint)]),s(c,r(a.map((function(t){return u.convertExternalPoint(t)})))),c.restore(),this.lastPoint=o}},ecceedMiniDistance:function(t,e){var n=this.options.miniDistance||0,r=e.x-t.x,i=e.y-t.y;return i*i+r*r>n*n},_touchEnd:function(t){this.painting=!1,this.hanziWriter.syncUserStroke(this.userStroke.slice(0)),this.userStroke=[];var e=this.userCanvas.getContext(\"2d\");e.clearRect(0,0,this.width,this.height)},drawLine:function(t,e){t.lineWidth=3,t.lineCap=\"round\",t.lineJoin=\"round\",t.beginPath();var n=e[0],r=e.slice(1);t.moveTo(n.x,n.y),r.forEach((function(e){t.lineTo(e.x,e.y)})),t.stroke()},setIsQuizzing:function(t){this.isQuizzing=t},_getClientBoundingRect:function(){var t=this;return new Promise((function(e){t.createSelectorQuery(\"#writer-canvas-user\").select(\"#writer-canvas-user\").boundingClientRect((function(t){e(t)})).exec()}))}}};e.default=s},c4a8:function(t,e,n){\"use strict\";n.r(e);var r=n(\"ec7f\"),i=n(\"2a04\");for(var o in i)\"default\"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n(\"73f5\");var a=n(\"2877\"),s=Object(a[\"a\"])(i[\"default\"],r[\"a\"],r[\"b\"],!1,null,\"7e8d76d0\",null);e[\"default\"]=s.exports},ec7f:function(t,e,n){\"use strict\";var r=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,\"a\",(function(){return r})),n.d(e,\"b\",(function(){return i}))},ed67:function(t,e,n){}}]);","extractedComments":[]}