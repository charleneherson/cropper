{"map":{"version":3,"sources":["pagesModule/study-report/components/poster-canvas.js"],"names":["global","push","351","module","__webpack_exports__","__webpack_require__","r","_poster_canvas_vue_vue_type_template_id_24a7ece4___WEBPACK_IMPORTED_MODULE_0__","_poster_canvas_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","options","__file","352","_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_15_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_poster_canvas_vue_vue_type_template_id_24a7ece4___WEBPACK_IMPORTED_MODULE_0__","353","render","staticRenderFns","_vm","this","_h","$createElement","_self","_c","_withStripped","354","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_poster_canvas_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_poster_canvas_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","355","exports","defineProperty","value","default","_common","_default2","name","props","learningData","type","Array","qrcodeurl","String","userName","userPic","harvestData","data","timer","ctx","result","buidFail","rate","fontHeight","footerHeight","photoHeight","posterCardBg","posterFooterBg","harvestIcon","crownIcon","crownBg","companyIcon","studyReportBg","icon","circleImg","closeIcon","mounted","initPermission","wx","createCanvasContext","getSystemInfoSync","screenWidth","startDraw","methods","drawBackBg","toPx","px","_this2","downloadFile","then","tempFilePath","drawImage","windowWidth","drawHarvestIcon","drawLearnPage","_this3","dataNum","dataUnit","setTextAlign","i","length","setFontSize","setFillStyle","num","fillText","unit","moveTo","lineTo","strokeStyle","lineWidth","stroke","font","typeText","drawCompanyIcon","drawText","text","leftWidth","initHeight","canvasWidth","currentLine","textHeight","lastSubStrIndex","drawLineText","lineCount","measureText","width","substring","_this4","drawCrownBg","_this5","drawCrownIcon","_this6","drawAvatar","_this7","save","beginPath","arc","Math","PI","clip","restore","setStrokeStyle","setLineWidth","drawCircleImg","_this8","drawTitle","isDraw","_this9","keys","title","aims","lineNum","_this9$drawText","drawFootBg","_this10","drawFooterWxCode","_this11","draw","setTimeout","handleToImage","_this","canvasToTempFilePath","x","y","height","canvasId","quality","success","res","fail","console","log","Toast","url","Promise","resolve","reject","statusCode","getSetting","withSubscriptions","auth","authSetting","undefined","authorize","scope","savePhotoToGallery","$emit","showModal","content","confirm","openSetting","_this12","showLoading","setInterval","clearInterval","saveImageToPhotosAlbum","filePath","err","hideLoading","closePosterPage","356","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_1_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_poster_canvas_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_1_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_poster_canvas_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default","357"],"mappings":"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"},"code":"(global[\"webpackJsonp\"]=global[\"webpackJsonp\"]||[]).push([[\"pagesModule/study-report/components/poster-canvas\"],{351:\n/*!*******************************************************************!*\\\n  !*** ./src/pagesModule/study-report/components/poster-canvas.vue ***!\n  \\*******************************************************************/\n/*! no static exports found */function(t,e,o){\"use strict\";o.r(e);var n=o(/*! ./poster-canvas.vue?vue&type=template&id=24a7ece4& */352),i=o(/*! ./poster-canvas.vue?vue&type=script&lang=js& */354);for(var a in i)\"default\"!==a&&function(t){o.d(e,t,(function(){return i[t]}))}(a);o(/*! ./poster-canvas.vue?vue&type=style&index=0&lang=less& */356);var s=o(/*! ../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */24),r=Object(s[\"default\"])(i[\"default\"],n[\"render\"],n[\"staticRenderFns\"],!1,null,null,null);r.options.__file=\"src/pagesModule/study-report/components/poster-canvas.vue\",e[\"default\"]=r.exports},352:\n/*!**************************************************************************************************!*\\\n  !*** ./src/pagesModule/study-report/components/poster-canvas.vue?vue&type=template&id=24a7ece4& ***!\n  \\**************************************************************************************************/\n/*! exports provided: render, staticRenderFns */function(t,e,o){\"use strict\";o.r(e);var n=o(/*! -!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--15-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster-canvas.vue?vue&type=template&id=24a7ece4& */353);o.d(e,\"render\",(function(){return n[\"render\"]})),o.d(e,\"staticRenderFns\",(function(){return n[\"staticRenderFns\"]}))},353:\n/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\\\n  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--15-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pagesModule/study-report/components/poster-canvas.vue?vue&type=template&id=24a7ece4& ***!\n  \\************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/\n/*! exports provided: render, staticRenderFns */function(t,e,o){\"use strict\";o.r(e),o.d(e,\"render\",(function(){return n})),o.d(e,\"staticRenderFns\",(function(){return i}));var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];n._withStripped=!0},354:\n/*!********************************************************************************************!*\\\n  !*** ./src/pagesModule/study-report/components/poster-canvas.vue?vue&type=script&lang=js& ***!\n  \\********************************************************************************************/\n/*! no static exports found */function(t,e,o){\"use strict\";o.r(e);var n=o(/*! -!../../../../node_modules/babel-loader/lib!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster-canvas.vue?vue&type=script&lang=js& */355),i=o.n(n);for(var a in n)\"default\"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e[\"default\"]=i.a},355:\n/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\\\n  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pagesModule/study-report/components/poster-canvas.vue?vue&type=script&lang=js& ***!\n  \\********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/\n/*! no static exports found */function(t,e,o){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var n=o(/*! @common/js/common */56),i={name:\"network-empty\",props:{learningData:{type:Array,default:[]},qrcodeurl:{type:String,default:function(){return\"\"}},userName:{type:String,default:function(){return\"\"}},userPic:{type:String,default:function(){return\"\"}},harvestData:{type:Object,default:function(){return{}}}},data:function(){return{timer:null,ctx:null,result:\"\",buidFail:!1,rate:\"\",fontHeight:0,footerHeight:0,photoHeight:0,posterCardBg:\"https://zyb-yayayuwen-1253445850.cos.ap-beijing.myqcloud.com/yaya-fe/study-report/poster-card-bg.png\",posterFooterBg:\"https://zyb-yayayuwen-1253445850.cos.ap-beijing.myqcloud.com/yaya-fe/study-report/poster-footer-bg.png\",harvestIcon:\"https://zyb-yayayuwen-1253445850.cos.ap-beijing.myqcloud.com/yaya-fe/study-report/point-item-icon.png\",crownIcon:\"https://zyb-yayayuwen-1253445850.cos.ap-beijing.myqcloud.com/yaya-fe/study-report/poster-crown-icon.png\",crownBg:\"https://zyb-yayayuwen-1253445850.cos.ap-beijing.myqcloud.com/yaya-fe/study-report/poster-crown-bg.png\",companyIcon:\"https://zyb-yayayuwen-1253445850.cos.ap-beijing.myqcloud.com/yaya-fe/study-report/logo111%402x.png\",studyReportBg:\"https://zyb-yayayuwen-1253445850.cos.ap-beijing.myqcloud.com/yaya-fe/study-report/poster-bg.png\",icon:\"https://zyb-yayayuwen-1253445850.cos.ap-beijing.myqcloud.com/yaya-fe/study-report/logo111%402x.png\",circleImg:\"https://zyb-yayayuwen-1253445850.cos.ap-beijing.myqcloud.com/yaya-fe/study-report/poster-circle-img.png\",closeIcon:\"https://zyb-yayayuwen-1253445850.cos.ap-beijing.myqcloud.com/yaya-fe/study-report/study-footer-close.png\"}},mounted:function(){this.initPermission(),this.ctx=wx.createCanvasContext(\"canvas\",this),this.rate=wx.getSystemInfoSync().screenWidth/375,this.startDraw()},methods:{startDraw:function(){this.drawBackBg()},toPx:function(t){return t*this.rate},drawBackBg:function(){var t=this;this.downloadFile(this.studyReportBg).then((function(e){t.ctx.drawImage(e,0,0,wx.getSystemInfoSync().windowWidth,t.toPx(667)),t.drawHarvestIcon(!1)}))},drawLearnPage:function(){var t=this;this.downloadFile(this.posterCardBg).then((function(e){var o,n;t.footerHeight=t.toPx(310)+t.fontHeight,t.photoHeight=t.footerHeight+t.toPx(110.5)+t.toPx(121),t.ctx.drawImage(e,t.toPx(11),t.toPx(95),wx.getSystemInfoSync().windowWidth-t.toPx(22),t.footerHeight),t.ctx.setTextAlign(\"center\");for(var i=0;i<t.learningData.length;i++)t.ctx.setFontSize(32),t.ctx.setFillStyle(\"#FF6A6A\"),t.learningData[i].num<10?(o=wx.getSystemInfoSync().windowWidth/2-t.toPx(105)+t.toPx(100*i),n=wx.getSystemInfoSync().windowWidth/2-t.toPx(90)+t.toPx(100*i)):t.learningData[i].num<100&&t.learningData[i].num>=10?(o=wx.getSystemInfoSync().windowWidth/2-t.toPx(104)+t.toPx(100*i),n=wx.getSystemInfoSync().windowWidth/2-t.toPx(80)+t.toPx(100*i)):(o=wx.getSystemInfoSync().windowWidth/2-t.toPx(110)+t.toPx(100*i),n=wx.getSystemInfoSync().windowWidth/2-t.toPx(80)+t.toPx(100*i)),t.ctx.fillText(t.learningData[i].num,o,t.toPx(245)),t.ctx.setFontSize(10),t.ctx.setFillStyle(\"#999999\"),t.ctx.fillText(t.learningData[i].unit,n,t.toPx(245)),t.ctx.setFontSize(14),t.ctx.setFillStyle(\"#666666\"),i!=t.learningData.length-1&&(t.ctx.moveTo(wx.getSystemInfoSync().windowWidth/2-t.toPx(50)+t.toPx(100*i),t.toPx(230)),t.ctx.lineTo(wx.getSystemInfoSync().windowWidth/2-t.toPx(50)+t.toPx(100*i),t.toPx(246)),t.ctx.strokeStyle=\"#EEEEEE\",t.ctx.lineWidth=t.toPx(1),t.ctx.stroke()),t.ctx.font=\"normal bold 14px sans-serif\",t.ctx.fillText(t.learningData[i].typeText,wx.getSystemInfoSync().windowWidth/2-t.toPx(100)+t.toPx(100*i),t.toPx(270)),t.ctx.font=\"normal 20px sans-serif\";t.fontHeight=0,t.drawCompanyIcon()}))},drawText:function(t,e,o,n,i){for(var a=0,s=0,r=0,c=\"\",l=0,x=0;x<t.length;x++)a+=this.ctx.measureText(t[x]).width,a>n?(i++,l++,i<4?c=t.substring(r,x):4==i&&(c=t.substring(r,x-3)+\"...\"),i<=4&&(this.ctx.fillText(c,e,o,n),o+=17.5*this.rate+6,a=0,r=x,s+=17.5*this.rate)):x==t.length-1&&i<4&&(this.ctx.fillText(t.substring(r,x+1),e,o,n),l++,i++,s+=17.5*this.rate);return{textHeight:s,lineCount:l}},drawCompanyIcon:function(){var t=this;this.downloadFile(this.companyIcon).then((function(e){t.ctx.drawImage(e,t.toPx(12),t.toPx(12),t.toPx(149),t.toPx(19)),t.drawCrownBg()}))},drawCrownBg:function(){var t=this;this.downloadFile(this.crownBg).then((function(e){t.ctx.drawImage(e,wx.getSystemInfoSync().windowWidth/2-t.toPx(104),t.toPx(80),t.toPx(204),t.toPx(38)),t.drawCrownIcon()}))},drawCrownIcon:function(){var t=this;this.downloadFile(this.crownIcon).then((function(e){t.ctx.drawImage(e,wx.getSystemInfoSync().windowWidth/2-t.toPx(30),t.toPx(43),t.toPx(48),t.toPx(38)),t.drawAvatar()}))},drawAvatar:function(){var t=this;this.downloadFile(this.userPic).then((function(e){t.ctx.save(),t.ctx.beginPath(),t.ctx.arc(wx.getSystemInfoSync().windowWidth/2,t.toPx(100),t.toPx(30),0,2*Math.PI),t.ctx.clip(),t.ctx.drawImage(e,wx.getSystemInfoSync().windowWidth/2-t.toPx(30),t.toPx(70),t.toPx(60),t.toPx(60)),t.ctx.restore(),t.ctx.arc(wx.getSystemInfoSync().windowWidth/2,t.toPx(100),t.toPx(32),0,2*Math.PI),t.ctx.setStrokeStyle(\"#FFFFFF\"),t.ctx.setLineWidth(t.toPx(2)),t.ctx.stroke(),t.drawCircleImg()}))},drawCircleImg:function(){var t=this;this.downloadFile(this.circleImg).then((function(e){t.ctx.drawImage(e,t.toPx(34),t.toPx(297),t.toPx(16),t.toPx(16)),t.drawTitle()}))},drawTitle:function(){this.ctx.font=\"normal bold 20px sans-serif\",this.ctx.setFillStyle(\"#333333\"),this.ctx.fillText(this.userName,wx.getSystemInfoSync().windowWidth/2,this.toPx(165)),this.ctx.font=\"normal 20px sans-serif\",this.ctx.setFontSize(16),this.ctx.setFillStyle(\"#666666\"),this.ctx.fillText(\"宝贝已经完成了今天的学习啦！\",wx.getSystemInfoSync().windowWidth/2,this.toPx(192)),this.drawHarvestIcon(!0)},drawHarvestIcon:function(t){var e=this;this.ctx.setTextAlign(\"left\"),this.downloadFile(this.harvestIcon).then((function(o){if(e.harvestData&&Object.keys(e.harvestData).length>0&&(e.ctx.setFontSize(18),e.ctx.setFillStyle(\"#333333\"),e.ctx.font=\"normal bold 18px sans-serif\",e.ctx.fillText(e.harvestData.title,e.toPx(42),e.toPx(320)),e.ctx.font=\"normal 20px sans-serif\",e.harvestData.aims&&Object.keys(e.harvestData.aims).length>0))for(var n=0,i=0;i<e.harvestData.aims.length;i++)if(n<=3){e.ctx.setFontSize(14),e.ctx.setFillStyle(\"#333333\"),e.ctx.drawImage(o,e.toPx(42),e.toPx(345)+1.5*e.fontHeight,e.toPx(10),e.toPx(9));var a=e.drawText(e.harvestData.aims[i],e.toPx(60),e.toPx(355)+1.5*e.fontHeight,e.toPx(266),n),s=a.lineCount,r=a.textHeight;n+=s,e.fontHeight+=r}t?e.drawFootBg():e.drawLearnPage()}))},drawFootBg:function(){var t=this;this.downloadFile(this.posterFooterBg).then((function(e){t.ctx.drawImage(e,t.toPx(11),t.toPx(96)+t.footerHeight,wx.getSystemInfoSync().windowWidth-t.toPx(22),t.toPx(128)),t.drawFooterWxCode()}))},drawFooterWxCode:function(){var t=this;this.downloadFile(this.qrcodeurl).then((function(e){t.ctx.drawImage(e,t.toPx(32),t.toPx(112)+t.footerHeight,t.toPx(89),t.toPx(89)),t.ctx.draw(!0,(function(){setTimeout((function(){t.handleToImage()}),300)}))}))},handleToImage:function(){var t=this;wx.canvasToTempFilePath({x:0,y:0,width:this.toPx(375),height:this.photoHeight,canvasId:\"canvas\",quality:1,success:function(e){t.result=e.tempFilePath},fail:function(e){console.log(e),t.buidFail=!0,(0,n.Toast)(\"加载失败，请重试\")}},this)},downloadFile:function(t){return new Promise((function(e,o){wx.downloadFile({url:t,success:function(t){200===t.statusCode?e(t.tempFilePath):o(t)}})}))},initPermission:function(){var t=this;wx.getSetting({withSubscriptions:!0,success:function(e){var o=e.authSetting[\"scope.writePhotosAlbum\"];void 0==o?wx.authorize({scope:\"scope.writePhotosAlbum\",success:function(){t.savePhotoToGallery()},fail:function(){t.$emit(\"permissionFail\")}}):!1===o?wx.showModal({title:\"提示\",content:\"去设置保存图片到相册权限\",success:function(e){e.confirm&&wx.openSetting({}),t.$emit(\"permissionFail\")},fail:function(){t.$emit(\"permissionFail\")}}):t.savePhotoToGallery()}})},savePhotoToGallery:function(){var t=this,e=this;wx.showLoading({title:\"正在生成中\"}),this.timer=setInterval((function(){t.result?(clearInterval(t.timer),t.timer=null,wx.saveImageToPhotosAlbum({filePath:t.result,success:function(t){e.$emit(\"getPosterImgUrl\",e.result,e.photoHeight)},fail:function(t){(0,n.Toast)(\"加载失败，请重试\"),wx.hideLoading(),e.$emit(\"permissionFail\")}})):t.buidFail&&(wx.hideLoading(),e.$emit(\"permissionFail\"))}),50)},closePosterPage:function(){this.$emit(\"closePosterPage\")}}};e.default=i},356:\n/*!*****************************************************************************************************!*\\\n  !*** ./src/pagesModule/study-report/components/poster-canvas.vue?vue&type=style&index=0&lang=less& ***!\n  \\*****************************************************************************************************/\n/*! no static exports found */function(t,e,o){\"use strict\";o.r(e);var n=o(/*! -!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-1!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-2!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src??ref--10-oneOf-1-3!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./poster-canvas.vue?vue&type=style&index=0&lang=less& */357),i=o.n(n);for(var a in n)\"default\"!==a&&function(t){o.d(e,t,(function(){return n[t]}))}(a);e[\"default\"]=i.a},357:\n/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\\\n  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-1!./node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--10-oneOf-1-3!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pagesModule/study-report/components/poster-canvas.vue?vue&type=style&index=0&lang=less& ***!\n  \\****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/\n/*! no static exports found */function(t,e,o){}}]);","extractedComments":[]}