{"map":{"version":3,"sources":["pagesModule1/@yaya/director-uni/lib/yaya-scene-quiz-in-class/questions/components/record-button.js"],"names":["global","push","885","module","__webpack_exports__","__webpack_require__","r","_record_button_vue_vue_type_template_id_2ffbe294_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_record_button_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","options","__file","886","_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_15_0_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_record_button_vue_vue_type_template_id_2ffbe294_scoped_true___WEBPACK_IMPORTED_MODULE_0__","887","render","staticRenderFns","_vm","this","_h","$createElement","_self","_c","_withStripped","888","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_record_button_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_record_button_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","889","exports","uni","defineProperty","value","default","_vuex","_audioSdkInstance","_interopRequireDefault","_lock","obj","__esModule","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","RecordAuth","e","then","bind","_default","props","question","type","clearCountDown","isPad","Boolean","data","progress_txt","count","countTimer","ctx","context","RecManager","readingTimer","showAuth","showTips","showTipsTimer","changingRecBtn","startRecordTime","recordDuration","stopCountDown","questionTitleArr","gushiIndex","repeatAfterCanSubmit","gushiAverageScore","gushiDuration","gushiUploadFileUrl","isReStart","isListening","readyCheck","stopWaitingIsFinnal","dingTimeOut","watch","params","console","log","clearTimeout","clearCanvas","_innerAudioContext","stop","gushiReadingTimer","handAudioContext","created","_audioEnd","audioEnd","arr","title","split","map","item","status","text","dingAudioContext","wx","createInnerAudioContext","src","components","computed","mapState","btnBg","step","STEPENUMS","moving","IMGRESOUCES","Record","concat","Pending","pendingView","backgroundType","audioPlayStatus","category","Listen","Pause","Start","methods","mapMutations","authCallback","res","startRecord","_this2","delay","CATEGORYENUMS","RepeatAfter","setTimeout","num","Math","floor","random","play","SingleReading","PeomReading","recordAuthCheck","self","userAllowRecord","getStorageSync","getSetting","success","authSetting","setStorageSync","authorize","scope","fail","updateStep","Date","bottomBtnTap","index","_this3","islock","recordingStatus","stopVoiceTest","_this4","changingAction","gushiStartVoiceTest","startVoiceTest","limitTime","parseInt","answerTime","_this5","updateRecordingStatus","createCanvasCxt","startAudioText","description","start","audioText","audioType","AUDIOTYPENUMS","QNA","Sentence","onResult","changeWordArr","wordList","score","word","$emit","should_stop","isFinnal","updateRecordRes","beginTime","getTime","online_audio_url","online_audio_url_mp3","length_ms","Number","Check","_this6","autoplay","poetry","fields","fileAudio","url","onEnded","gushiCheckAudio","overtime","fieldAnswerTime","gushiStopVoiceTest","_this7","peomIndex","isReceiving","resume","_this8","pause","tempFilePath","uploadIssue","onError","_this9","wx_user","resultData","code","client","from","content","JSON","stringify","errorText","user","$http","pro_post","err","circleColor","cw","ch","cr","_this","query","createSelectorQuery","in","select","boundingClientRect","rect","width","height","exec","createCanvasContext","imd","circ","PI","quart","beginPath","setLineCap","closePath","fill","canvasGetImageData","canvasId","x","y","Uint8ClampedArray","draw","current","canvasPutImageData","setLineWidth","setStrokeStyle","arc","stroke","loadCanvas","now","timer","setInterval","clearInterval","clearRect","destory","destroySdk","call","891","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_record_button_vue_vue_type_style_index_0_id_2ffbe294_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_record_button_vue_vue_type_style_index_0_id_2ffbe294_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","892"],"mappings":"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"},"code":"(global[\"webpackJsonp\"]=global[\"webpackJsonp\"]||[]).push([[\"pagesModule1/@yaya/director-uni/lib/yaya-scene-quiz-in-class/questions/components/record-button\"],{885:\n/*!*****************************************************************************************************************!*\\\n  !*** ./src/pagesModule1/@yaya/director-uni/lib/yaya-scene-quiz-in-class/questions/components/record-button.vue ***!\n  \\*****************************************************************************************************************/\n/*! no static exports found */function(t,e,i){\"use strict\";i.r(e);var n=i(/*! ./record-button.vue?vue&type=template&id=2ffbe294&scoped=true& */886),o=i(/*! ./record-button.vue?vue&type=script&lang=js& */888);for(var s in o)\"default\"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i(/*! ./record-button.vue?vue&type=style&index=0&id=2ffbe294&lang=scss&scoped=true& */891);var r=i(/*! ../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js */24),a=Object(r[\"default\"])(o[\"default\"],n[\"render\"],n[\"staticRenderFns\"],!1,null,\"2ffbe294\",null);a.options.__file=\"src/pagesModule1/@yaya/director-uni/lib/yaya-scene-quiz-in-class/questions/components/record-button.vue\",e[\"default\"]=a.exports},886:\n/*!************************************************************************************************************************************************************!*\\\n  !*** ./src/pagesModule1/@yaya/director-uni/lib/yaya-scene-quiz-in-class/questions/components/record-button.vue?vue&type=template&id=2ffbe294&scoped=true& ***!\n  \\************************************************************************************************************************************************************/\n/*! exports provided: render, staticRenderFns */function(t,e,i){\"use strict\";i.r(e);var n=i(/*! -!../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--15-0!../../../../../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./record-button.vue?vue&type=template&id=2ffbe294&scoped=true& */887);i.d(e,\"render\",(function(){return n[\"render\"]})),i.d(e,\"staticRenderFns\",(function(){return n[\"staticRenderFns\"]}))},887:\n/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\\\n  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--15-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pagesModule1/@yaya/director-uni/lib/yaya-scene-quiz-in-class/questions/components/record-button.vue?vue&type=template&id=2ffbe294&scoped=true& ***!\n  \\**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/\n/*! exports provided: render, staticRenderFns */function(t,e,i){\"use strict\";i.r(e),i.d(e,\"render\",(function(){return n})),i.d(e,\"staticRenderFns\",(function(){return o}));var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];n._withStripped=!0},888:\n/*!******************************************************************************************************************************************!*\\\n  !*** ./src/pagesModule1/@yaya/director-uni/lib/yaya-scene-quiz-in-class/questions/components/record-button.vue?vue&type=script&lang=js& ***!\n  \\******************************************************************************************************************************************/\n/*! no static exports found */function(t,e,i){\"use strict\";i.r(e);var n=i(/*! -!../../../../../../../../node_modules/babel-loader/lib!../../../../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./record-button.vue?vue&type=script&lang=js& */889),o=i.n(n);for(var s in n)\"default\"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e[\"default\"]=o.a},889:\n/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\\\n  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pagesModule1/@yaya/director-uni/lib/yaya-scene-quiz-in-class/questions/components/record-button.vue?vue&type=script&lang=js& ***!\n  \\******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/\n/*! no static exports found */function(t,e,i){\"use strict\";(function(t){Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var n=i(/*! vuex */27),o=r(i(/*! ../js/audioSdkInstance.js */642)),s=i(/*! ../js/lock.js */890);function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var l=function(){return i.e(/*! import() | pagesModule1/@yaya/director-uni/lib/yaya-scene-quiz-in-class/questions/components/record-auth */\"pagesModule1/@yaya/director-uni/lib/yaya-scene-quiz-in-class/questions/components/record-auth\").then(i.bind(null,/*! ./record-auth.vue */915))},h={props:{question:{type:Object,default:{}},clearCountDown:{type:Object,default:{}},isPad:{type:Boolean,default:!1}},data:function(){return{progress_txt:\"中200upx...\",count:0,countTimer:null,ctx:null,context:null,RecManager:null,readingTimer:null,showAuth:!1,showTips:!1,showTipsTimer:null,changingRecBtn:!1,startRecordTime:0,recordDuration:0,stopCountDown:!1,questionTitleArr:[],gushiIndex:0,repeatAfterCanSubmit:!1,gushiAverageScore:0,gushiDuration:0,gushiUploadFileUrl:\"\",isReStart:!1,isListening:!0,readyCheck:!1,stopWaitingIsFinnal:null,dingTimeOut:null}},watch:{clearCountDown:function(t){console.log(\"监听到clearCountDown\",t),clearTimeout(this.showTipsTimer),clearTimeout(this.dingTimeOut),this.clearCanvas(),this._innerAudioContext[this.gushiIndex]&&this._innerAudioContext[this.gushiIndex].stop(),this._innerAudioContext=[],this.gushiIndex=0,this.recordDuration=0,this.isReStart=!0,this.gushiDuration=0,this.readyCheck=!1,this.isListening=!0,this.gushiAverageScore=0,this.stopWaitingIsFinnal=null,clearTimeout(this.gushiReadingTimer),clearTimeout(this.readingTimer),this.handAudioContext&&this.handAudioContext.stop(),\"stop\"==t.type&&(console.log(\"params.type == stop\"),o.default.stop(),this.showTips=!1)}},created:function(){this._audioEnd=this.audioEnd.bind(this),this._innerAudioContext=[];var t=this.question.title.split(\"\");this.questionTitleArr=t.map((function(t){return{status:\"normal\",text:t}})),this.dingAudioContext=wx.createInnerAudioContext(),this.dingAudioContext.src=\"https://zyb-yayayuwen-1253445850.cos.ap-beijing.myqcloud.com/yaya-fe/sdk-media/yaya-audio/audio_ding_start.mp3\"},components:{RecordAuth:l},computed:u({},(0,n.mapState)(\"quizInClass\",[\"STEPENUMS\",\"CATEGORYENUMS\",\"AUDIOTYPENUMS\",\"IMGRESOUCES\",\"step\",\"audioPlayStatus\",\"recordingStatus\",\"recordRes\"]),{btnBg:function(){var t=this.step,e=this.STEPENUMS,i=(this.IMGRESOUCES,this.changingRecBtn?\"moving\":\"\");switch(t){case e.Record:return\"new_btn_sprit final \".concat(i);case e.Pending:return\"new_btn_sprit Pending\";default:return\"new_btn_sprit huatong \".concat(i)}},pendingView:function(){var t=this.step,e=this.STEPENUMS;switch(t){case e.Pending:return!0;default:return!1}},backgroundType:function(){var t=this.question,e=this.step,i=this.STEPENUMS,n=this.audioPlayStatus;if(96===t.category||97===t.category)switch(console.log(e,i,n),e){case i.Listen:return n?\"breathing\":\"listening\";case i.Record:return\"listening\";case i.Pause:return\"pauseing\";default:return\"still\"}else switch(e){case i.Start:return\"breathing\";case i.Listen:return\"listening\";case i.Record:return\"listening\";default:return\"still\"}}}),methods:u({},(0,n.mapMutations)(\"quizInClass\",[\"updateRecordRes\",\"updateStep\",\"updateRecordingStatus\"]),{authCallback:function(t){t?(this.startRecord(),this.showAuth=!1):this.showAuth=!0},audioEnd:function(){var t=this;console.log(\"音频播放结束\",this.step);var e=10;this.isListening=!1,this.step<this.STEPENUMS.Record&&(this.question.category==this.CATEGORYENUMS.RepeatAfter?this.showTipsTimer=setTimeout((function(){t.showTips=!0,console.log(\"----------出现小手播放随机音频---------\");var e=Math.floor(5*Math.random()+1);t.handAudioContext=wx.createInnerAudioContext(),t.handAudioContext.src=\"https://zyb-yayayuwen-1253445850.cos.ap-beijing.myqcloud.com/yaya-fe/sdk-media/yaya-audio/RepeatAfterHandAudio\".concat(e,\".mp3\"),setTimeout((function(){t.step<t.STEPENUMS.Record&&t.handAudioContext.play()}),0)}),3e3):this.question.category!=this.CATEGORYENUMS.SingleReading&&this.question.category!=this.CATEGORYENUMS.PeomReading||setTimeout((function(){t.recordAuthCheck()}),e))},recordAuthCheck:function(){console.log(\"录音权限检查\");var t=this,e=wx.getStorageSync(\"userAllowRecord\");e?t.startRecord():wx.getSetting({success:function(e){e.authSetting[\"scope.record\"]?(t.startRecord(),wx.setStorageSync(\"userAllowRecord\",!0)):wx.authorize({scope:\"scope.record\",success:function(){console.log(\"用户已经同意小程序使用录音功能,开始录音111-----------------\\x3e\"),t.startRecord(),wx.setStorageSync(\"userAllowRecord\",!0)},fail:function(){console.log(\"----------拒绝授权--------------\"),t.updateStep(t.STEPENUMS.Start),t.showAuth=!0}})}}),this.startRecordTime=+new Date,console.log(\"录音权限检查recordAuthCheck当前时间\",this.startRecordTime),clearTimeout(t.showTipsTimer),t.showTips=!1},bottomBtnTap:function(t){var e=this;if(!(0,s.islock)(\"bottomBtnTap\")&&this.question.category!=this.CATEGORYENUMS.PeomReading)if(this.audioPlayStatus||this.step==this.STEPENUMS.Pending)console.log(\"音频播放中,点击了底部按钮... category \".concat(this.question.category));else if(this.recordingStatus)if(this.question.category==this.CATEGORYENUMS.RepeatAfter){if(+new Date-this.startRecordTime<2e3)return void console.log(\"没超过2s点不了-------\\x3e\");console.log(\"开放口述停止录音\"),this.updateStep(this.STEPENUMS.Pending),setTimeout((function(){e.stopVoiceTest()}),300)}else this.question.category==this.CATEGORYENUMS.SingleReading&&(console.log(\"单独跟读点击按钮   停止录音\"),this.updateStep(this.STEPENUMS.Pending),setTimeout((function(){e.stopVoiceTest()}),300));else console.log(\"检查录音权限\"),this.recordAuthCheck(),this.handAudioContext&&this.handAudioContext.stop()},startRecord:function(){var t=this;if(this.question.category==this.CATEGORYENUMS.RepeatAfter&&this.changingAction(),console.log(\"开始录音触发函数\"),this.question.category==this.CATEGORYENUMS.PeomReading)console.log(\"古诗进入古诗的播放逻辑  题目放一句 学生答一句  再放下一句\"),this.gushiStartVoiceTest();else{console.log(\"进入开放口述和单句的播放逻辑\"),this.startVoiceTest();var e=parseInt(this.question.answerTime);e=this.question.category==this.CATEGORYENUMS.SingleReading&&e>=60?60:e,e&&this.recordingStatus&&(this.readingTimer=setTimeout((function(){console.log(\"结束录音动作\"),t.stopVoiceTest()}),1e3*e))}},startVoiceTest:function(){var t=this;this.question.category==this.CATEGORYENUMS.SingleReading&&(console.log(\"ding音频播放  当前时间\",+new Date),this.dingAudioContext.play()),this.updateStep(this.STEPENUMS.Record),this.updateRecordingStatus(!0),this.createCanvasCxt(this.question.answerTime),console.log(\"[开始录音] 单句跟读 || 开放口述----------\\x3e\"),console.log(\"question\",this.question);var e=\"\";e=this.question.category==this.CATEGORYENUMS.RepeatAfter?this.question.description.split(\"、\"):this.question.title,this.dingTimeOut=setTimeout((function(){o.default.start({audioText:e,audioType:t.question.category==t.CATEGORYENUMS.RepeatAfter?t.AUDIOTYPENUMS.QNA:t.AUDIOTYPENUMS.Sentence},t.isReStart),o.default.onResult((function(e){console.log(\"开放和单句检测到onresult\",e);var i=e.wordList.map((function(t){return{status:+t.score>0?\"correct\":\"wrong\",text:t.word}}));t.$emit(\"changeWord\",{changeWordArr:i,type:\"SingleReading\"}),1==e.should_stop&&(console.log(\"----------单句和开放res.should_stop----------\",e),t.question.category==t.CATEGORYENUMS.SingleReading&&(t.updateStep(t.STEPENUMS.Pending),t.stopVoiceTest())),e.isFinnal&&(console.log(\"----------结束录音动作res.Finnal----------\",e),t.stopWaitingIsFinnal&&clearTimeout(t.stopWaitingIsFinnal),t.readyCheck=!0,t.updateRecordRes({beginTime:(new Date).getTime(),online_audio_url:e.online_audio_url_mp3,score:e.score,length_ms:parseInt(Number(e.length_ms)/1e3)}),t.clearCanvas(),setTimeout((function(){t.question.category==t.CATEGORYENUMS.SingleReading?(console.log(\"单句跟读触发提交\"),t.updateStep(t.STEPENUMS.Check)):t.repeatAfterCanSubmit&&t.updateStep(t.STEPENUMS.Check)}),1e3))}))}),500)},gushiStartVoiceTest:function(){var t=this;console.log(\"古诗开始录音动作  this._innerAudioContext\",this._innerAudioContext),console.log(\"古诗开始录音动作  this.question\",this.question),console.log(\"古诗开始录音动作  this.gushiIndex\",this.gushiIndex),this.$emit(\"gushiChange\",this.gushiIndex),this._innerAudioContext.push(wx.createInnerAudioContext()),this._innerAudioContext[this.gushiIndex].autoplay=!1,this._innerAudioContext[this.gushiIndex].src=this.question.poetry.fields[this.gushiIndex].fileAudio.url,this._innerAudioContext[this.gushiIndex].play(),this._innerAudioContext[this.gushiIndex].onEnded((function(){console.log(\"检测到语音播放完毕 开始录音   进入语音检测\"),t.gushiCheckAudio();var e=parseInt(t.question.poetry.fields[t.gushiIndex].fieldAnswerTime);e=e>60?60:e,e&&t.recordingStatus&&(t.gushiReadingTimer=setTimeout((function(){console.log(\"倒计时结束  古诗结束录音动作\"),t.gushiStopVoiceTest()}),1e3*e))}))},gushiCheckAudio:function(){var t=this;console.log(\"[开始录音] 古诗----gushiIndex------\\x3e\",this.gushiIndex),console.log(\"question\",this.question),this.updateStep(this.STEPENUMS.Listen),this.updateRecordingStatus(!0),setTimeout((function(){t.createCanvasCxt(t.question.poetry.fields[t.gushiIndex].fieldAnswerTime)}),0),console.log(\"this.question.poetry.fields[this.gushiIndex].text\",this.question.poetry.fields[this.gushiIndex].text),0===+this.gushiIndex?(console.log(\"第一次播放调用start   this.isReStart\",this.isReStart),console.log(\"this.question.poetry.fields[this.gushiIndex].text\",this.question.poetry.fields[this.gushiIndex].text),o.default.start({audioText:this.question.poetry.fields[this.gushiIndex].text,audioType:this.AUDIOTYPENUMS.Sentence},this.isReStart),o.default.onResult((function(e){console.log(\"古诗检测到onResult\",e);var i=e.wordList.map((function(t){return{status:+t.score>0?\"correct\":\"wrong\",text:t.word}}));t.$emit(\"changeWord\",{changeWordArr:i,type:\"PeomReading\",peomIndex:t.gushiIndex}),1==e.should_stop&&e.isReceiving&&t.gushiStopVoiceTest(),e.isFinnal&&(console.log(\"----------古诗检测到isFinnal 触发resume-----\".concat(t.gushiIndex,\"-----\"),e),t.gushiIndex++,t.gushiAverageScore+=e.score,t.gushiDuration+=parseInt(Number(e.length_ms)/1e3),t.gushiIndex<t.question.poetry.fields.length?(console.log(\"gushiIndex < 4  继续播放下一句古诗音频\"),t.gushiStartVoiceTest()):(console.log(\"最后一句古诗录音完毕 进行提交\",e),console.log(\"this.gushiUploadFileUrl\",t.gushiUploadFileUrl),t.readyCheck=!0,t.stopWaitingIsFinnal&&clearTimeout(t.stopWaitingIsFinnal),setTimeout((function(){t.updateRecordRes({beginTime:(new Date).getTime(),online_audio_url:t.gushiUploadFileUrl,score:Math.floor(t.gushiAverageScore/t.question.poetry.fields.length),length_ms:t.gushiDuration}),t.clearCanvas(),t.updateStep(t.STEPENUMS.Check)}),1e3)))}))):0<+this.gushiIndex<this.question.poetry.fields.length&&(console.log(\"后续播放调用resume\"),o.default.resume({audioText:this.question.poetry.fields[this.gushiIndex].text,audioType:this.AUDIOTYPENUMS.Sentence}))},gushiStopVoiceTest:function(){var t=this;(0,s.islock)(\"gushiStopVoiceTest\")||(console.log(\"监听到古诗进行暂停\"),clearTimeout(this.gushiReadingTimer),this.stopCountDown=!0,this.clearCanvas(),this.updateRecordingStatus(!1),this.gushiIndex<this.question.poetry.fields.length-1?(console.log(\"pause  暂停语音SDK\"),this.updateStep(this.STEPENUMS.Pause),o.default.pause()):(console.log(\"stop   停止语音SDK\"),this.updateStep(this.STEPENUMS.Pending),o.default.stop((function(e){t.gushiUploadFileUrl=e.tempFilePath})),this.uploadIssue()))},stopVoiceTest:function(){console.log(\"单句和开放结束录音动作\"),(0,s.islock)(\"stopVoiceTest\")||(this.question.category==this.CATEGORYENUMS.RepeatAfter&&(this.repeatAfterCanSubmit=!0),clearTimeout(this.readingTimer),this.stopCountDown=!0,this.clearCanvas(),console.log(\"[阅读类题型 结束录音]-------------\\x3e category:\".concat(this.question.category)),o.default.stop(),this.uploadIssue(),this.updateRecordingStatus(!1),o.default.onError((function(){console.log(\"[销毁 vSdk]--------------------\\x3e \")})))},uploadIssue:function(){var e=this;if(!this.stopWaitingIsFinnal){var i=t.getStorageSync(\"wx_user\")?t.getStorageSync(\"wx_user\"):\"-1\";this.stopWaitingIsFinnal=setTimeout((function(){console.log(\"等待isfinnal\");var t={code:11111,client:2,from:\"fe\",content:JSON.stringify({errorText:\"请求语音测评没有返回isfinnal\",user:i})};e.$http.pro_post(\"https://yuwen.zybang.com/mainstation/tool/uploadIssue\",t).then((function(t){console.log(\"上报异常接口请求成功\",t)}),(function(t){console.log(t)}))}),6e3)}},changingAction:function(){var t=this;t.changingRecBtn=!0,setTimeout((function(){t.changingRecBtn=!1}),800)},createCanvasCxt:function(t){console.log(\"触发canvas倒计时圆环\");var e=\"\";e=this.question.category==this.CATEGORYENUMS.RepeatAfter?\"#FBE2BA\":\"#C1E2EE\",this.stopCountDown=!1;var i,n,o,s=this,r=wx.createSelectorQuery().in(s);r.select(\"#canvasWrap\").boundingClientRect((function(t){i=parseInt(t.width/2),n=parseInt(t.height/2),o=parseInt((t.height-6)/2)})).exec();var a=wx.createCanvasContext(\"canvasWrap\",s),u=null,c=2*Math.PI,l=Math.PI/2;a.beginPath(),a.setLineCap(\"square\"),a.closePath(),a.fill(),u=wx.canvasGetImageData({canvasId:\"canvasWrap\",x:0,y:0,width:240,height:240,success:function(t){}});new Uint8ClampedArray([255,0,0,1]);function h(t){wx.canvasPutImageData({canvasId:\"canvasWrap\",x:0,y:0,width:1,height:1,data:u,success:function(t){}}),a.setLineWidth(10/166*i*2),a.setStrokeStyle(e),a.beginPath(),a.setLineCap(\"square\"),a.arc(i,n,o,-l,c*t-l,!1),a.stroke(),a.draw()}function d(e){var i=setInterval((function(){s.recordDuration>e?(h(s.recordDuration),clearInterval(i),console.log(\"最后一次绘制\")):s.stopCountDown?(clearInterval(i),console.log(\"暂停绘制\"),s.stopCountDown=!1):(h(s.recordDuration),s.recordDuration+=2/t*.01)}),20)}s.recordDuration=0,setTimeout((function(){d(1)}),1e3)},clearCanvas:function(){this.stopCountDown=!0;var t=this,e=wx.createCanvasContext(\"canvasWrap\",t);e.clearRect(0,0,300,300),e.draw(),console.log(\"清除圆环倒计时\")}}),destory:function(){o.default.destroySdk()}};e.default=h}).call(this,i(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)[\"default\"])},891:\n/*!***************************************************************************************************************************************************************************!*\\\n  !*** ./src/pagesModule1/@yaya/director-uni/lib/yaya-scene-quiz-in-class/questions/components/record-button.vue?vue&type=style&index=0&id=2ffbe294&lang=scss&scoped=true& ***!\n  \\***************************************************************************************************************************************************************************/\n/*! no static exports found */function(t,e,i){\"use strict\";i.r(e);var n=i(/*! -!../../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-1!../../../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../../../../../node_modules/vue-loader/lib??vue-loader-options!../../../../../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./record-button.vue?vue&type=style&index=0&id=2ffbe294&lang=scss&scoped=true& */892),o=i.n(n);for(var s in n)\"default\"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e[\"default\"]=o.a},892:\n/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\\\n  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-1!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pagesModule1/@yaya/director-uni/lib/yaya-scene-quiz-in-class/questions/components/record-button.vue?vue&type=style&index=0&id=2ffbe294&lang=scss&scoped=true& ***!\n  \\********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/\n/*! no static exports found */function(t,e,i){}}]);","extractedComments":[]}