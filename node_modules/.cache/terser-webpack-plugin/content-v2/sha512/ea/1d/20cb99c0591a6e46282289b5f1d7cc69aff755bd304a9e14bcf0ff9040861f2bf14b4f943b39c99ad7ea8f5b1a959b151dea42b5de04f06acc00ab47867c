{"map":{"version":3,"sources":["pagesModule/submit-order-fragment/submit-order.js"],"names":["global","push","2659","module","__webpack_exports__","__webpack_require__","r","_submit_order_vue_vue_type_template_id_409b8e0c_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_submit_order_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","5aec","exports","uni","defineProperty","value","default","_regenerator","_interopRequireDefault","_common","_orderMixin","_jumpPage","_iphonexBottom","_yuwenLog","obj","__esModule","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","TitleBar","e","bind","confirmDialog","bottomFragment","purchaseSubtotal","addressFragment","courseTab","couponListFragment","noPaymentPopupFragment","APPID","LASTFROM","getLastFrom","_isEmpty","target","JSON","stringify","_default","name","components","data","skuId","orderId","prepaymentList","visibleOfNoPayment","visibleOfSelectCoupon","hasGiftList","hasAddress","addressInfoId","courseProductInfo","iphonexBottomHeight","saleChannelId","selectedCouponId","mixins","onLoad","option","addressId","$on","closePopup","onShow","getPrepaymentList","methods","_this","showLoading","title","params","couponId","$http","pro_get","skuIdCouponIdMap","purchaseMode","isRecommendCoupon","res","giftList","materialList","addressInfo","getCourseProductInfo","couponList","curSkuCouponMap","forEach","item","orderStatus","payExpireTime","clearTimeout","countdownTimer","countdownInit","hideLoading","existingOrderId","setConfirmText","catch","skuListItem","skuList","length","skuName","level","startClassTime","date","content","img","productName","Array","isArray","productImage","toggleSelectCouponPopup","type","Toast","hasValidCoupon","confirmUseCurrentCoupon","navigatorToAddressPage","url","concat","goBack","encodeURIComponent","method","paymentSubmit","_paymentSubmit","mark","_callee","purchaseData","wrap","_context","prev","next","parseInt","abrupt","canBuy","canNotBuyReason","loading","getPurchaseData","sent","totalPrice","getCheckStand","oCheckStandData","payStatus","closeStatus","paymentSubmitConfirm","t0","errNo","errstr","stop","getPurchaseRequestData","appId","flowPond","plat","appType","cuid","jumpFrom","phone","ua","lastfrom","orifrom","logpath","os","getSystemInfoSync","platform","call","5f94","render","_vm","_h","$createElement","g0","_self","_c","a0","$mp","assign","$root","staticRenderFns","9b67","createPage","_submitOrder","9d70","b66f","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_1_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_submit_order_vue_vue_type_style_index_0_id_409b8e0c_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_1_node_modules_css_loader_dist_cjs_js_ref_10_oneOf_1_2_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_3_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_4_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_10_oneOf_1_5_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_submit_order_vue_vue_type_style_index_0_id_409b8e0c_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","f576","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_submit_order_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_node_modules_babel_loader_lib_index_js_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_node_modules_vue_loader_lib_index_js_vue_loader_options_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_submit_order_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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"},"code":"(global[\"webpackJsonp\"]=global[\"webpackJsonp\"]||[]).push([[\"pagesModule/submit-order-fragment/submit-order\"],{2659:function(t,e,n){\"use strict\";n.r(e);var s=n(\"5f94\"),r=n(\"f576\");for(var o in r)\"default\"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n(\"b66f\");var a=n(\"2877\"),i=Object(a[\"a\"])(r[\"default\"],s[\"a\"],s[\"b\"],!1,null,\"409b8e0c\",null);e[\"default\"]=i.exports},\"5aec\":function(t,e,n){\"use strict\";(function(t){Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var s=d(n(\"a34a\")),r=n(\"f20c\"),o=d(n(\"03f2\")),a=d(n(\"fd06\")),i=d(n(\"d68d\")),u=n(\"46c6\");function d(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,s,r,o,a){try{var i=t[o](a),u=i.value}catch(d){return void n(d)}i.done?e(u):Promise.resolve(u).then(s,r)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(s,r){var o=t.apply(e,n);function a(t){c(o,s,r,a,i,\"next\",t)}function i(t){c(o,s,r,a,i,\"throw\",t)}a(void 0)}))}}var l=function(){return n.e(\"components/common/titleBar/titleBar\").then(n.bind(null,\"b1c8\"))},m=function(){return n.e(\"components/yy-confirm-dialog/confirm-dialog\").then(n.bind(null,\"91ed\"))},f=function(){return n.e(\"pagesModule/submit-order-fragment/components/bottom-fragment\").then(n.bind(null,\"2bdd\"))},h=function(){return n.e(\"pagesModule/submit-order-fragment/components/purchase-subtotal\").then(n.bind(null,\"a396\"))},g=function(){return n.e(\"pagesModule/submit-order-fragment/components/address-fragment\").then(n.bind(null,\"4457\"))},I=function(){return n.e(\"pagesModule/submit-order-fragment/components/course-tab\").then(n.bind(null,\"bf8f\"))},b=function(){return n.e(\"pagesModule/submit-order-fragment/components/coupon-list-fragment\").then(n.bind(null,\"e852\"))},y=function(){return n.e(\"pagesModule/submit-order-fragment/components/no-payment-popup-fragment\").then(n.bind(null,\"68b8\"))},L=\"wx33873be8d9429f37\",v=(0,u.getLastFrom)();function C(t){return!t||(\"{}\"===JSON.stringify(t)||\"[]\"===JSON.stringify(t))}var k={name:\"SubmitOrder\",components:{TitleBar:l,bottomFragment:f,purchaseSubtotal:h,addressFragment:g,courseTab:I,noPaymentPopupFragment:y,confirmDialog:m,couponListFragment:b},data:function(){return{skuId:\"\",orderId:\"\",prepaymentList:null,visibleOfNoPayment:!1,visibleOfSelectCoupon:!1,hasGiftList:!1,hasAddress:!1,addressInfoId:\"\",courseProductInfo:{},iphonexBottomHeight:i.default,saleChannelId:\"\",selectedCouponId:1}},mixins:[o.default],onLoad:function(t){this.skuId=t.skuId,this.saleChannelId=t.saleChannelId,this.addressInfoId=t.addressId?t.addressId:\"\",this.$on(\"countdownFinish\",this.closePopup)},onShow:function(){this.getPrepaymentList()},methods:{getPrepaymentList:function(){var e=this;t.showLoading({title:\"加载中...\"});var n=[{skuId:this.skuId,couponId:this.selectedCouponId?1===this.selectedCouponId?\"\":this.selectedCouponId+\"\":\"\"}];this.$http.pro_get(\"/kid-chinese/purchase/prepayment\",{skuIdCouponIdMap:n,purchaseMode:0,addressId:this.addressInfoId,isRecommendCoupon:(1===this.selectedCouponId)+0,saleChannelId:this.saleChannelId?this.saleChannelId:601}).then((function(n){if(e.prepaymentList=n,e.hasGiftList=!(C(e.prepaymentList.giftList)&&C(e.prepaymentList.materialList)),e.hasAddress=!C(e.prepaymentList.addressInfo),e.courseProductInfo=e.getCourseProductInfo(),n.couponList.curSkuCouponMap[e.skuId]&&e.prepaymentList.couponList.curSkuCouponMap[e.skuId].forEach((function(t){return e.selectedCouponId=t})),0===e.prepaymentList.orderStatus&&e.prepaymentList.payExpireTime>0&&(e.visibleOfNoPayment=!0,clearTimeout(e.countdownTimer),e.countdownInit(e.prepaymentList.payExpireTime)),t.hideLoading(),0!==e.prepaymentList.orderStatus||0!==e.prepaymentList.payExpireTime)return 1===e.prepaymentList.orderStatus?(e.orderId=e.prepaymentList.existingOrderId,void e.setConfirmText(\"single\",!0,\"提示\",\"\",\"查看订单\",\"订单已支付\")):void 0;e.setConfirmText(\"single\",!0,\"提示\",\"\",\"重新下单\",\"订单已过期，请您重新下单\")})).catch((function(e){t.hideLoading()}))},getCourseProductInfo:function(){var t=null;if(0===this.prepaymentList.skuList.length)return{};t=this.prepaymentList.skuList[0];var e={};return e.skuName=t.name,e.level=t.level,e.startClassTime=t.date,e.materialList=[],this.prepaymentList.giftList.forEach((function(t){e.materialList.push({name:t.skuName,content:\"\",img:\"\"})})),this.prepaymentList.materialList.forEach((function(t){e.materialList.push({name:t.productName,content:t.content,img:Array.isArray(t.productImage)?t.productImage[0]:\"\"})})),e},closePopup:function(){this.visibleOfNoPayment=!1},toggleSelectCouponPopup:function(t){\"show\"===t?0===this.prepaymentList.orderStatus?(0,r.Toast)(\"您有一个待支付订单\"):!C(this.prepaymentList)&&this.prepaymentList.couponList.hasValidCoupon?this.visibleOfSelectCoupon=!0:(0,r.Toast)(\"当前暂无可用优惠券\"):this.visibleOfSelectCoupon=!1},confirmUseCurrentCoupon:function(t){this.selectedCouponId=t||0,this.getPrepaymentList()},navigatorToAddressPage:function(){var t=\"\".concat(\"https://yuwen.zybang.com\",\"/static/hy/duck-turbo/\").concat(this.hasAddress?\"address-list\":\"add-address\",\".html\"),e=encodeURIComponent(\"/pagesModule/submit-order-fragment/submit-order?skuId=\".concat(this.skuId));t+=\"?addressId=\".concat(this.addressInfoId,\"&WxMiniApp=1&purchaseOrderId=1&skuId=\").concat(this.skuId,\"&referPageName=prepayment&lastfrom=\").concat(v,\"&goBack=\").concat(e),(0,a.default)({url:\"/pagesModule/common-web-view/common-web-view?url=\".concat(encodeURIComponent(t)),method:\"navigateTo\"})},paymentSubmit:function(){var e=p(s.default.mark((function e(){var n;return s.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,1!==parseInt(this.prepaymentList.orderStatus)){e.next=5;break}return this.setConfirmText(\"single\",!0,\"提示\",\"\",\"查看订单\",\"订单已支付\"),t.hideLoading(),e.abrupt(\"return\");case 5:if(0!==parseInt(this.prepaymentList.orderStatus)){e.next=9;break}return this.visibleOfNoPayment=!0,t.hideLoading(),e.abrupt(\"return\");case 9:if(0!==this.prepaymentList.canBuy){e.next=13;break}return this.setConfirmText(\"single\",!0,\"提示\",\"\",\"知道了\",this.prepaymentList.canNotBuyReason),this.loading=!1,e.abrupt(\"return\");case 13:return t.showLoading({title:\"正在锁定订单\"}),e.next=16,this.getPurchaseData();case 16:if(n=e.sent,this.orderId=n.orderId,0!==parseInt(this.prepaymentList.totalPrice)){e.next=22;break}return(0,a.default)({url:\"/pagesModule/common-web-view/common-web-view?url=\".concat(encodeURIComponent(\"\".concat(\"https://yuwen.zybang.com\",\"/static/hy/duck-turbo/completion-of-payment.html?orderId=\").concat(this.orderId)))}),e.abrupt(\"return\");case 22:return e.next=24,this.getCheckStand();case 24:if(this.oCheckStandData=e.sent,0===this.oCheckStandData.payStatus&&1!==this.oCheckStandData.closeStatus){e.next=30;break}return this.setConfirmText(\"single\",!0,\"提示\",\"\",\"确定\",\"当前订单状态不能付款\"),t.hideLoading(),e.abrupt(\"return\");case 30:t.hideLoading(),this.paymentSubmitConfirm(),e.next=38;break;case 34:e.prev=34,e.t0=e[\"catch\"](0),e.t0.data&&0!==e.t0.data.errNo&&this.setConfirmText(\"single\",!0,\"提示\",\"\",\"知道了\",e.t0.data.errstr),t.hideLoading();case 38:case\"end\":return e.stop()}}),e,this,[[0,34]])})));function n(){return e.apply(this,arguments)}return n}(),getPurchaseData:function(){return this.$http.pro_get(\"/kid-chinese/purchase/purchase\",this.getPurchaseRequestData())},getPurchaseRequestData:function(){return{skuList:JSON.stringify([{skuId:this.skuId,couponId:this.selectedCouponId?1===this.selectedCouponId?\"\":this.selectedCouponId+\"\":\"\"}]),addressInfo:JSON.stringify(this.prepaymentList.addressInfo),purchaseData:this.prepaymentList.purchaseData,appId:L,flowPond:\"\",plat:\"\",appType:\"\",cuid:\"\",jumpFrom:\"\",phone:\"\",ua:\"\",lastfrom:v,orifrom:\"\",logpath:\"\",os:t.getSystemInfoSync().platform,saleChannelId:this.saleChannelId}}}};e.default=k}).call(this,n(\"543d\")[\"default\"])},\"5f94\":function(t,e,n){\"use strict\";var s=function(){var t=this,e=t.$createElement,n=(t._self._c,JSON.stringify(t.courseProductInfo)),s={skuId:t.skuId};t.$mp.data=Object.assign({},{$root:{g0:n,a0:s}})},r=[];n.d(e,\"a\",(function(){return s})),n.d(e,\"b\",(function(){return r}))},\"9b67\":function(t,e,n){\"use strict\";(function(t){n(\"6cdc\"),n(\"921b\");s(n(\"66fd\"));var e=s(n(\"2659\"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n(\"543d\")[\"createPage\"])},\"9d70\":function(t,e,n){},b66f:function(t,e,n){\"use strict\";var s=n(\"9d70\"),r=n.n(s);r.a},f576:function(t,e,n){\"use strict\";n.r(e);var s=n(\"5aec\"),r=n.n(s);for(var o in s)\"default\"!==o&&function(t){n.d(e,t,(function(){return s[t]}))}(o);e[\"default\"]=r.a}},[[\"9b67\",\"common/runtime\",\"common/vendor\"]]]);","extractedComments":[]}