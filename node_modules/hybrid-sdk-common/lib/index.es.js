import e from"axios";for(var t=Object.freeze({__proto__:null,get core_openWindow(){return Y},get openWindow(){return Y},get windowConfig(){return z},get openBrowser(){return V},get core_goBack(){return $},get goBack(){return $},get share(){return G},get core_share(){return G},get core_login(){return X},get login(){return X},get checkLogin(){return ee},get nativeLog(){return te},get fetchImg(){return re},get dial(){return ne},get downloader(){return ae},get copyText(){return se},get imgBrowser(){return ce},get core_audio(){return le},get audio(){return le},get core_showDialog(){return de},get showDialog(){return de},get netType(){return ge},get core_request(){return fe},get request(){return he},get core_getCommonParameters(){return ve},get getCommonParameters(){return ve},get isAppInstalled(){return me},get removeNativeLoading(){return _e},get commonPay(){return be},get hybrid(){return we},get pageTo(){return xe},get RouteSwitcher(){return ke},get core_openUrl(){return Ce},get setStorage(){return De},get getStorage(){return Oe},get showDebuger(){return Se}}),r=function(){return(r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n={},o=["String","Number","Array","Function"],a=0,i=o.length
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */;a<i;a++){!function(e){n["is"+e]=function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}}(o[a])}function s(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=window.location.search.substr(1).match(t);return null!=r?decodeURIComponent(r[2]):null}function c(e){return function(t){return e&&e(t),Promise.resolve(t)}}function u(e){return function(t){return e&&e(t),Promise.reject(t)}}function l(e,t){return function(r){void 0===r&&(r={}),200==r.code?r.data&&!1===r.data.callResult?t&&t(r.data):r.data?e&&e(r.data):e&&e(r):200==r.errcode?(r.data&&e&&e(r.data),!r.data&&e&&e(r)):404==r.code||404==r.errcode?(r.data&&t&&t(r.data),!r.data&&t&&t(r)):e&&e(r)}}function d(e,t){return function(e,t,r){return new Promise((function(n,o){var a=function(e){n(e)},i=function(e){o(e)};r&&e(t,r,l(a,i)),!r&&e(t,l(a,i))}))}(J,e,t)}var g=function(e){if(null===e)return null;var t=Object.assign({},e);return Object.keys(t).forEach((function(r){return t[r]="object"==typeof e[r]?g(e[r]):e[r]})),Array.isArray(e)&&e.length?(t.length=e.length)&&Array.from(t):Array.isArray(e)?Array.from(e):t},p=function(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var o=r[n].trim();if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null},f={getQueryString:s,isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},queryString:function(e){return e?function(e){for(var t=[],r=0,n=e.length;r<n;r++)e[r]&&t.push(e[r]);return t}(Object.keys(e).map((function(t){return void 0===e[t]?"":encodeURIComponent(t)+"="+encodeURIComponent(e[t])}))).join("&"):""},trim:function(e){return e.replace(/^\s+|\s+$/gm,"")},guid:function(){return"xxxxxxxx_xxxx_4xxx_yxxx_xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},getMergedCallback:l,deepClone:g,getCookie:p},h={core_goBack:210,goBack:210,openBrowser:210,windowConfig:210,core_openWindow:210,openWindow:210,core_share:210,share:210,checkLogin:210,core_login:210,login:210,nativeLog:210,fetchImg:210,dial:210,downloader:210,copyText:210,imgBrowser:210,core_audio:210,audio:210,core_showDialog:210,showDialog:210,netType:210,core_request:210,request:210,core_getCommonParameters:210,getCommonParameters:210,isAppInstalled:210,removeNativeLoading:210,pageTo:210,hybrid:210,commonPay:210,setStorage:210,getStorage:210,onPageEnter:210,onPageLeave:210,onPageDestroy:210,onPagePullFresh:210,onNativeCallback:210},v=navigator.userAgent.toLowerCase(),m={android:v.indexOf("android")>-1||v.indexOf("adr")>-1,iPhone:v.indexOf("iphone")>-1,iPad:v.indexOf("ipad")>-1},_=(m.android||m.iPhone||m.iPad)&&v.indexOf("_vc")>0,b=_?"airclass":"a_irclass",w=_?"homework":"h_omework",y=v.indexOf(b)>-1?b:v.indexOf(w)>-1?w:"unknow";function k(e){return e.replace(/^\s+|\s+$/gm,"")}B=y+"_vc/",x=new RegExp(B+"[\\d.]+\\s*","ig"),P=v.match(x),Array.isArray(P)&&k(P[0].replace(B,"")),j=y+"_vcname/",A=new RegExp(j+"[\\d.]+\\s*","ig"),C=v.match(A),Array.isArray(C)&&k(C[0].replace(j,""));var B,x,P,j,A,C,D=_,O={isAndroid:function(){return m.android},isIPhone:function(){return m.iPhone},isIPad:function(){return m.iPad}},S=function(){var e={},t=window.navigator.userAgent.split(" ");if((t=t.filter((function(e){return e.indexOf("jsBridge_isNewJsBridge/")>=0||e.indexOf("jsBridge_vc/")>=0||e.indexOf("jsBridge_os_version/")>=0}))).forEach((function(t){var r=t.split("/");e[r[0]]=r[1]})),e.jsBridge_vc){var r=e.jsBridge_vc;r=+r.split(".").join(""),e.jsBridge_vcnum=r}return"1"===e.jsBridge_isNewJsBridge&&(e.isNewJsBridge=!0),e}();function T(e){var t=window,r=+S.jsBridge_isNewJsBridge,n=S.jsBridge_vcnum,o=t.webkit&&t.webkit.messageHandlers&&t.webkit.messageHandlers.ZYBJSBridge,a=1===r&&n>=210&&o;if(O.isAndroid()){var i=S.jsBridge_os_version;(i=i?+i.substr(0,3):10)<4.2&&(a=!1)}a&&e&&"string"==typeof e&&(a=h[e]>=n);return a}var L=window,E=/(localhost|127.0.0.1)/.test(location.origin),R=null;function N(){var e=E?"/hybridaction/":"iknowhybrid://",t=0;return function(r,o,a){var i=function(){var e=document.createElement("iframe");return e.setAttribute("style","display:none;"),e.setAttribute("height","0px"),e.setAttribute("width","0px"),e.setAttribute("frameborder","0"),document.documentElement.appendChild(e),e}();o&&"[object Function]"===Object.prototype.toString.call(o)&&(a=o,o={});var s=function(r,o,a){var i=e+r+"?",s=f.guid();if(i+="data="+encodeURIComponent(JSON.stringify(o||{})),a){var c="__cb__"+r+"__"+s+"__"+t++;E&&(R=c),L[c]=function(){var e=arguments;(e=[].slice.call(e)).push(c),a&&a.apply(window,e),n.isFunction(a.remove)?c&&a.remove.apply(a,[c]):delete L[c]},i+="&__callback__="+c}return i}(r,o,a);E&&(i.onload=window[R]),R=null,i.setAttribute("src",s),function(e){e.timer=setTimeout((function(){e.parentNode.removeChild(e),clearTimeout(e.timer)}),3e3)}(i)}}L.hybrid_sdk_framekey=(new Date).getTime()+f.guid();var W=D?N():"unknow"===y?function(){}:function(e,t,r){t&&"[object Function]"===Object.prototype.toString.call(t)&&(r=t,t={}),(t=t||{}).hybrid_sdk_framekey=L.hybrid_sdk_framekey,L.parent.h5PluginAction(e,t,r)};E&&(console.log("本地环境，createHybrid"),W=N());var F=/(localhost|127.0.0.1)/.test(window.location.origin),I=window;function U(e,t,r){W(e,t,(function(e){r({code:200,data:e})}))}function J(e,t,r){var n=S.jsBridge_os_version;n=n?n.substr(0,3):10,O.isAndroid()&&+n<4.2?U(e,t,r):(t&&"[object Function]"===Object.prototype.toString.call(t)&&(r=t,t={}),r&&(I[e]=r),I.__jsBridge.invoke(e,t,r))}I.__jsBridge={callbackPool:{},ack_no:1},I.__jsBridge.invoke=function(e,t,r){t?"[object Function]"===Object.prototype.toString.call(t)&&(r=t,t={}):t={};var n={action:e,param:t};if(r){if(F){var o=arguments;return o=[].slice.call(o),void r.apply(window,o)}var a="cbk_"+I.__jsBridge.ack_no++;n.callbackKey=a,I.__jsBridge.callbackPool[a]=r,"core_windowConfig"==e&&(I.__jsBridge.callbackPool[e]=r)}var i=I.__jsBridge.param(n);I.ZYBJSBridge?I.ZYBJSBridge.postMessage(i):I.webkit&&I.webkit.messageHandlers&&I.webkit.messageHandlers.ZYBJSBridge?I.webkit.messageHandlers.ZYBJSBridge.postMessage(i):U(e,t,r)},I.__jsBridge.callback=function(e){var t=e.callbackKey,r=I.__jsBridge.callbackPool[t];"function"==typeof r?(delete e.callbackKey,e.errcode&&(e.code=e.errcode,delete e.errcode),r(e),r.remove&&"function"==typeof r.remove?(r.delete&&"function"==typeof r.delete||(r.delete=function(e){delete I.__jsBridge.callbackPool[e]}),r.remove.apply(r,[t])):delete I.__jsBridge.callbackPool[t]):console.error("没有找到callbackKey")},I.__jsBridge.param=function(e){var t=JSON.stringify(e);return t||""};var M=window,H=M.getOpenWindowClassName&&M.getOpenWindowClassName()||null,Z={pageUrl:"",title:"",swapBack:0,hideStatusBar:0,hideNavBar:0,screenDirection:0,navBarBgColor:"",staBarStyle:0,showShareBtn:0,allLight:0},K=["","WebViewController","com.baidu.homework.activity.web.ZybWebActivity","ZYBWKWebViewController","com.baidu.homework.activity.live.web.LiveCacheHybridActivity"];function Y(e){if(e.businessData){var t=e.businessData.classType;t.ios&&(e.businessData.className_ios=K[t.ios]),t.android&&(e.businessData.className_android=K[t.android]),delete e.businessData.classType,e.businessData=r(r({},H),e.businessData)}else e.businessData=H;return d("core_openWindow",r(r({},Z),e))}var q={pageUrl:"",title:"",swapBack:0,hideStatusBar:0,hideNavBar:0,screenDirection:0,navBarBgColor:"",staBarStyle:0,allLight:0,showShareBtn:0,shareBtnBgImg:"",shareData:{},shareCallBack:function(){},backShowDialog:0,dialogData:{},dialogCallback:function(){d("core_exit",{backWindow:1})}};function z(e){var t=r({},e);return new Promise((function(e,r){var n=function(t){e(t)},o=function(e){r(e)};J("core_windowConfig",t,(function(e){var r=l(n,o),a=t.shareCallBack||q.shareCallBack,i=t.dialogCallback||q.dialogCallback;e.data&&e.data.result+1>0?a(e.data):e.data&&e.data.res?i(e.data):r(e.data)}))}))}function V(e){J("core_openBrowser",e)}function $(e){return d("core_exit",r({backWindow:0},e))}var Q={style:0,title:"",content:"",contentWeibo:"",url:"",imgBase64:"",imgUrl:"",origin:"",fileExtension:"",shotScreen:0,channelArray:[0,1,2,3,4],directChannel:-1};function G(e,t){var n=r(r({},Q),e),o=c(t),a=u(t);return d("core_share",n).then(o,a)}function X(e,t){var r=c(t),n=u(t);return d("core_login",e).then(r,n)}function ee(e){var t=c(e),r=u(e);return d("core_isLogin").then(t,r)}function te(e){return d("core_nlog",r({},e))}function re(e,t){var n=r({},e),o=c(t),a=u(t);return d("core_fetchImg",n).then(o,a)}function ne(e){return d("core_dial",e)}var oe={url:"",type:0};function ae(e,t){var n=r(r({},oe),e),o=c(t),a=u(t);return d("core_downloader",n).then(o,a)}var ie={content:"",hint:""};function se(e){return d("core_copyToClipboard",r(r({},ie),e))}function ce(e){return d("core_showImgBrowser",r({},e))}var ue={playStatus:1,url:"",loop:0,interrupt:1};function le(e){var t=e.data,n=e.success,o=e.error,a=e.complete,i=e.notFound,s=e.interrupt,c=r(r({},ue),t);c.srcName&&(c.url=c.srcName,delete c.srcName),J("core_audioDisplay",c,(function(e){switch(+e.data.code){case 200:n&&n(e.data);break;case 202:a&&a(e.data);break;case 403:s&&s(e.data);break;case 500:o&&o(e.data);break;default:o(e.data)}404==e.code&&i&&i(e.data)}))}function de(e,t){var n=r({title:""},e),o=c(t),a=u(t);return d("core_showDialog",n).then(o,a)}function ge(e){var t=c(e),r=u(e);return d("core_netStatus").then(t,r)}var pe={type:"post",url:"",params:{}};function fe(e){return d("core_httpRequest",r(r({},pe),e))}function he(t,n){var o=c(n),a=u(n);return D?fe(t).then(o,a):function(t){return e({method:t.type,url:t.url,headers:t.headers,data:t.params})}(t).then((function(e){var t=r({env:"web",errorTips:""},e);return o&&o(t),t}))}function ve(e){var t=c(e),r=u(e);return d("core_commonData").then(t,r)}function me(e,t){var r={url:e.url},n=c(t),o=u(t);return d("core_isAppInstalled",r).then(n,o)}function _e(){return d("core_removeLoading")}function be(e,t){var r=c(t),n=u(t);return S.jsBridge_vcnum>=210?d("core_FIRE",e).then(r,n):Promise.reject({code:404,errcode:404}).then(r,n)}function we(e,t,r){0===e.indexOf("core_")?J(e,t,r):W(e,t,r)}D&&S.isNewJsBridge&&setTimeout((function(){_e()}),3e3);var ye=210,ke=function(){function n(e){if(this.isCommonActionReturned=!1,this.isRouteConfigReturned=!1,this.routeMap=null,this.initTimestamp=(new Date).getTime(),console.log("初始化RouteSwitcher时间"+this.initTimestamp),this.sdk=e||t,n.instance)return n.instance;console.log("switchConfig",S),this.isParsingUrlByOwn=S.jsBridge_vcnum<ye}return n.prototype.pollingRoutesConfig=function(e){var t=this;if(e){this.storeRoutesMap(e);setInterval((function(){t.storeRoutesMap(e)}),6e4)}else console.log("configUrl 为空，不能请求路由表")},n.prototype.pageTo=function(e,t){if(console.log("pageTo this"),console.log(this),this.isParsingUrlByOwn){var n=this.parsingRoute(e),o=g(e);delete o.module,delete o.page,delete o.params,delete o.prefix;var a=r({pageUrl:n},o);console.log("sdk.core_openWindow({pageUrl:parsedUrl, ...otherParams})"),console.log(a);var i=c(t),s=u(t);return this.sdk.core_openWindow(a).then(i,s)}e.pageKey="zyb://"+e.module+"/page/"+e.page+e.params,delete e.module,delete e.page,delete e.params,console.log("sdk.core_openUrl(to, callback)"),console.log(e);i=c(t);var l=u(t);return this.sdk.core_openUrl(e).then(i,l)},n.prototype.parsingRoute=function(e){var t=e.module,r=e.page,n=e.params;return""+(e.prefix||"/static/hy/")+t+"/"+r+".html"+n},n.prototype.storeRoutesMap=function(t){var r=this;e.get(t).then((function(e){var t=e.data,n=void 0===t?{}:t,o=e.status;if((o+"").startsWith("4")||(o+"").startsWith("5"))throw new Error("get sparta route failed with status: "+o+", data: "+JSON.stringify(n)+" ");r.routeMap=n,r.isRouteConfigReturned=!0,console.log("获取路由表成功时间差"+((new Date).getTime()-r.initTimestamp))}))},n.prototype.getStoredRoutes=function(){return this.routeMap},n.prototype.getRouteConfUrl=function(){var e,t=this.platform,r=(new Date).getTime(),n=Math.floor(r/1e5),o=this.detectEnv();if(console.log("envType"),console.log(o),"online"===o.type)e="https://xxx.bsc.com/route/online/";else if("tips"===o.type)e=" https://xxx.bsc.com/route/tips/";else{if("docker"!==o.type)return null;e="https://xxx.bcs.com/route/"+o.name+"/"}return""+e+t+".json?t="+n},n.prototype.detectEnv=function(){var e=window.document.location.host,t=/(.*)-docker.*/g.exec(e);return"www.zybang.com"===e?null!==p("__tips__")||null!==s("__tips__")?{type:"tips"}:{type:"online"}:t?{type:"docker",name:t[1]}:{type:"unknow"}},n.instance=null,n}(),Be=new ke;window.__router__=Be;var xe=Be.pageTo.bind(Be);window.__router__.pageTo.bind(window.__router__);var Pe=["","WebViewController","com.baidu.homework.activity.web.ZybWebActivity","ZYBWKWebViewController","com.baidu.homework.activity.live.web.LiveCacheHybridActivity"],je=window,Ae=je.getOpenWindowClassName&&je.getOpenWindowClassName()||null;function Ce(e){if(e.businessData){var t=e.businessData.classType;t.ios&&(e.businessData.className_ios=Pe[t.ios]),t.android&&(e.businessData.className_android=Pe[t.android]),delete e.businessData.classType,e.businessData=r(r({},Ae),e.businessData)}else e.businessData=Ae;return d("core_openUrl",r({},e))}function De(e,t){var r=c(t),n=u(t);return d("core_storage",e).then(r,n)}function Oe(e,t){var r=c(t),n=u(t);return d("core_getStorage",e).then(r,n)}function Se(){return d("core_showDebuger")}var Te=window;function Le(e,t){console.log("listen:"+e),Te.callbackList[e]||(Te.callbackList[e]=[]),Te.callbackList[e].push(t),console.log(Te.callbackList)}function Ee(e,t){console.log(Te.callbackList);var r=Array.prototype.shift.call(arguments),n=Te.callbackList[r];if(console.log("trigger:"+r),console.log(n),!n||0===n.length)return!1;for(var o,a=0;o=n[a++];)o.apply(this,arguments)}function Re(e,t){console.log("remove:"+e);var r=Te.callbackList[e];if(!r)return!1;if(t)for(var n=r.length-1;n>=0;n--){r[n]===t&&r.splice(n,1)}else;}Te.callbackList=Te.callbackList?Te.callbackList:{};var Ne,We=window,Fe=function(){};function Ie(e){return void 0===e&&(e=Fe),Le(Ne.PageEnter,e),{remove:function(){Re(Ne.PageEnter,e)}}}function Ue(e){return void 0===e&&(e=Fe),Le(Ne.PageLeave,e),{remove:function(){Re(Ne.PageLeave,e)}}}function Je(e){return void 0===e&&(e=Fe),Le(Ne.PageDestroy,e),{remove:function(){Re(Ne.PageDestroy,e)}}}function Me(e){return void 0===e&&(e=Fe),Le(Ne.PagePullFresh,e),{remove:function(){Re(Ne.PagePullFresh,e)},pullRefreshFinish:function(){J("pullRefreshFinish")}}}function He(e,t){return void 0===t&&(t=Fe),Le(e,t),We.extroActionTypePool.push(e),{remove:function(){Re(e,t)}}}function Ze(e){return"1"===function(e){for(var t=window.location.search.substring(1).split("&"),r=0;r<t.length;r++){var n=t[r].split("=");if(n[0]===e)return n[1]}return!1}("zybhost")?function(e){if("string"!=typeof e)throw new Error("url must be string");return"zybhost://"+e.match(/^(.*\/\/)?(.*)$/)[2]}(e):e}We.extroActionTypePool=We.extroActionTypePool?We.extroActionTypePool:[],function(e){e.PageEnter="onPageActive",e.PageLeave="onPagePause",e.PageDestroy="onPageDestroy",e.AppEnterBackground="onEnterBackground",e.AppEnterForeground="onEnterForeground",e.PagePullFresh="pullRefresh"}(Ne||(Ne={})),We.NATIVE_CALLBACK=function(e){var t=We.extroActionTypePool.length;if(0!==t)for(var r=0;r<t;r++)if(e.action_type===We.extroActionTypePool[r])return void Ee(e.action_type,e.data);switch(e.action_type){case Ne.PageEnter:Ee(Ne.PageEnter,e.data);break;case Ne.PageLeave:Ee(Ne.PageLeave,e.data);break;case Ne.PageDestroy:Ee(Ne.PageDestroy,e.data);break;case Ne.AppEnterBackground:Ee(Ne.AppEnterBackground,e.data);break;case Ne.AppEnterForeground:Ee(Ne.AppEnterForeground,e.data);break;case Ne.PagePullFresh:Ee(Ne.PagePullFresh,e.data);break;default:console.log("未知类型的全局回调, "+e.action_type)}};export{Ne as ActionType,le as audio,T as canUseCommon,ee as checkLogin,be as commonPay,se as copyText,le as core_audio,ve as core_getCommonParameters,$ as core_goBack,X as core_login,Y as core_openWindow,fe as core_request,G as core_share,de as core_showDialog,ne as dial,ae as downloader,re as fetchImg,ve as getCommonParameters,Oe as getStorage,$ as goBack,we as hybrid,W as iframeHybrid,ce as imgBrowser,me as isAppInstalled,S as jsBridgeInfo,X as login,te as nativeLog,ge as netType,He as onNativeCallback,Je as onPageDestroy,Ie as onPageEnter,Ue as onPageLeave,Me as onPagePullFresh,V as openBrowser,Y as openWindow,xe as pageTo,J as postMessageHybrid,_e as removeNativeLoading,he as request,De as setStorage,G as share,de as showDialog,Ze as transformCacheUrl,z as windowConfig};
