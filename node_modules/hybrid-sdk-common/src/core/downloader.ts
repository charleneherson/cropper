import { getPromiseFunc, resolveCallbackFactory, rejectCallbackFactory} from "../utils/tool";

interface downloaderParams {
    url: String;  // 资源路径
    type: number;  // 0 other， 1 图片， 2 音频， 3 视频
    base64?: String;  // type为1时，图片的base64编码
    businessData?: any;
}

const defaultPrams: downloaderParams = {
    url: '',
    type: 0,
}

/**
 * 下载资源
 * @param params 
 */
export function downloader(params: any, callback?: Function): any {
    let _params: downloaderParams = {
        ...defaultPrams,
        ...params
    }
    let success= resolveCallbackFactory(callback);
    let fail= rejectCallbackFactory(callback);
    return getPromiseFunc("core_downloader", _params).then(success, fail);
    
}