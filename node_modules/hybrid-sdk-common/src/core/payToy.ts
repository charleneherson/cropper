import { getPromiseFunc, resolveCallbackFactory, rejectCallbackFactory } from "../utils/tool";
import {switchConfig} from "../utils/system"

interface commonPayParams {
    channel: number ;  // 渠道分类 http://wiki.afpai.com/pages/viewpage.action?pageId=19902070
    info: object; // 协议内容，调用第三方支付需要的信息，比如，商户号，通知地址，APPID
    source?: number; // 支付来源，比如，订单列表，需要和端协商来定义
}
interface commonPayResponse {
    status: number;
    errstr: string;
}

/**
 * 监测应用是否安装
 * @param params 
 */
export function commonPay(params: commonPayParams, callback?: Function): Promise<any> {
    let success= resolveCallbackFactory(callback);
    let fail= rejectCallbackFactory(callback);
    if(switchConfig.jsBridge_vcnum >= 210){
        return getPromiseFunc("core_FIRE", params).then(success, fail);
    }else {
        return Promise.reject({code: 404, errcode: 404}).then(success, fail);
    }
    
}